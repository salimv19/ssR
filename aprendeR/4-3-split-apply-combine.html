<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="aprendeR" />
<meta property="og:type" content="book" />





<meta name="author" content="Andrea Fernández Conde" />


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="aprendeR">

<title>aprendeR</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link rel="stylesheet" href="estilos.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#introduccion"><span class="toc-section-number">1</span> Introducción</a></li>
<li class="has-sub"><a href="2-r-lo-basico.html#r-lo-basico"><span class="toc-section-number">2</span> R: lo básico</a><ul>
<li><a href="2-1-instalacion.html#instalacion"><span class="toc-section-number">2.1</span> Instalación</a></li>
<li class="has-sub"><a href="2-2-editores.html#editores"><span class="toc-section-number">2.2</span> Editores</a><ul>
<li><a href="2-2-editores.html#rstudio"><span class="toc-section-number">2.2.1</span> RStudio</a></li>
<li><a href="2-2-editores.html#ess"><span class="toc-section-number">2.2.2</span> ESS</a></li>
</ul></li>
<li class="has-sub"><a href="2-3-el-espacio-de-trabajo-workspace.html#el-espacio-de-trabajo-workspace"><span class="toc-section-number">2.3</span> El espacio de trabajo (Workspace)</a><ul>
<li><a href="2-3-el-espacio-de-trabajo-workspace.html#directorio-de-trabajo"><span class="toc-section-number">2.3.1</span> Directorio de trabajo</a></li>
<li><a href="2-3-el-espacio-de-trabajo-workspace.html#ejemplos-basicos"><span class="toc-section-number">2.3.2</span> Ejemplos básicos</a></li>
<li><a href="2-3-el-espacio-de-trabajo-workspace.html#comandos-utiles"><span class="toc-section-number">2.3.3</span> Comandos útiles</a></li>
</ul></li>
<li class="has-sub"><a href="2-4-paquetes-libraries.html#paquetes-libraries"><span class="toc-section-number">2.4</span> Paquetes (<em>libraries</em>)</a><ul>
<li><a href="2-4-paquetes-libraries.html#cran"><span class="toc-section-number">2.4.1</span> CRAN</a></li>
<li><a href="2-4-paquetes-libraries.html#github"><span class="toc-section-number">2.4.2</span> Github</a></li>
<li><a href="2-4-paquetes-libraries.html#otras-fuentes"><span class="toc-section-number">2.4.3</span> Otras fuentes</a></li>
</ul></li>
<li><a href="2-5-paquetes-recomendados.html#paquetes-recomendados"><span class="toc-section-number">2.5</span> Paquetes recomendados</a></li>
<li><a href="2-6-scripting.html#scripting"><span class="toc-section-number">2.6</span> Scripting</a></li>
<li class="has-sub"><a href="2-7-rmarkdown.html#rmarkdown"><span class="toc-section-number">2.7</span> rmarkdown</a><ul>
<li><a href="2-7-rmarkdown.html#encabezado-y-formatos"><span class="toc-section-number">2.7.1</span> Encabezado y formatos</a></li>
<li><a href="2-7-rmarkdown.html#knitr-chunks"><span class="toc-section-number">2.7.2</span> Knitr chunks</a></li>
</ul></li>
<li><a href="2-8-ayuda-y-documentacion.html#ayuda-y-documentacion"><span class="toc-section-number">2.8</span> Ayuda y documentación</a></li>
<li><a href="2-9-optimizando.html#optimizando"><span class="toc-section-number">2.9</span> Optimizando</a></li>
<li><a href="2-10-material-adicional.html#material-adicional"><span class="toc-section-number">2.10</span> Material adicional</a></li>
</ul></li>
<li class="has-sub"><a href="3-estructuras-y-funciones.html#estructuras-y-funciones"><span class="toc-section-number">3</span> Estructuras y funciones</a><ul>
<li><a href="3-1-objetos.html#objetos"><span class="toc-section-number">3.1</span> Objetos</a></li>
<li class="has-sub"><a href="3-2-funciones.html#funciones"><span class="toc-section-number">3.2</span> Funciones</a><ul>
<li><a href="3-2-funciones.html#componentes-de-una-funcion"><span class="toc-section-number">3.2.1</span> Componentes de una función</a></li>
<li><a href="3-2-funciones.html#el-ambiente"><span class="toc-section-number">3.2.2</span> El ambiente</a></li>
<li><a href="3-2-funciones.html#reglas-de-visibilidad-scoping"><span class="toc-section-number">3.2.3</span> Reglas de visibilidad (scoping)</a></li>
</ul></li>
<li class="has-sub"><a href="3-3-estructuras-de-datos.html#estructuras-de-datos"><span class="toc-section-number">3.3</span> Estructuras de datos</a><ul>
<li><a href="3-3-estructuras-de-datos.html#clases-atomicas-atomic-classes"><span class="toc-section-number">3.3.1</span> Clases atómicas (atomic classes)</a></li>
<li><a href="3-3-estructuras-de-datos.html#vectores"><span class="toc-section-number">3.3.2</span> Vectores</a></li>
<li><a href="3-3-estructuras-de-datos.html#matrices"><span class="toc-section-number">3.3.3</span> Matrices</a></li>
<li><a href="3-3-estructuras-de-datos.html#listas"><span class="toc-section-number">3.3.4</span> Listas</a></li>
<li><a href="3-3-estructuras-de-datos.html#factores-factor"><span class="toc-section-number">3.3.5</span> Factores (factor)</a></li>
<li><a href="3-3-estructuras-de-datos.html#data-frames"><span class="toc-section-number">3.3.6</span> Data frames</a></li>
</ul></li>
<li class="has-sub"><a href="3-4-estructuras-de-datos-fuera-de-r-basico.html#estructuras-de-datos-fuera-de-r-basico"><span class="toc-section-number">3.4</span> Estructuras de datos fuera de R-básico</a><ul>
<li><a href="3-4-estructuras-de-datos-fuera-de-r-basico.html#data-tables"><span class="toc-section-number">3.4.1</span> Data tables</a></li>
<li><a href="3-4-estructuras-de-datos-fuera-de-r-basico.html#tibbles"><span class="toc-section-number">3.4.2</span> Tibbles</a></li>
</ul></li>
<li class="has-sub"><a href="3-5-objetos-importantes.html#objetos-importantes"><span class="toc-section-number">3.5</span> Objetos importantes</a><ul>
<li><a href="3-5-objetos-importantes.html#infinito"><span class="toc-section-number">3.5.1</span> Infinito</a></li>
<li><a href="3-5-objetos-importantes.html#no-es-un-numero"><span class="toc-section-number">3.5.2</span> No es un número</a></li>
<li><a href="3-5-objetos-importantes.html#valores-perdidos-missing-values"><span class="toc-section-number">3.5.3</span> Valores perdidos (missing values)</a></li>
</ul></li>
<li class="has-sub"><a href="3-6-estructuras-de-control.html#estructuras-de-control"><span class="toc-section-number">3.6</span> Estructuras de control</a><ul>
<li><a href="3-6-estructuras-de-control.html#if"><span class="toc-section-number">3.6.1</span> If</a></li>
<li><a href="3-6-estructuras-de-control.html#for"><span class="toc-section-number">3.6.2</span> For</a></li>
<li><a href="3-6-estructuras-de-control.html#whiles"><span class="toc-section-number">3.6.3</span> Whiles</a></li>
<li><a href="3-6-estructuras-de-control.html#repeat---break"><span class="toc-section-number">3.6.4</span> Repeat - Break</a></li>
<li><a href="3-6-estructuras-de-control.html#next"><span class="toc-section-number">3.6.5</span> Next</a></li>
</ul></li>
<li><a href="3-7-material-adicional-1.html#material-adicional-1"><span class="toc-section-number">3.7</span> Material adicional</a></li>
</ul></li>
<li class="has-sub"><a href="4-vectorizacion-la-familia-apply-y-otros.html#vectorizacion-la-familia-apply-y-otros"><span class="toc-section-number">4</span> Vectorización, la familia apply y otros</a><ul>
<li class="has-sub"><a href="4-1-subconjuntos-de-diferentes-estructuras-de-datos.html#subconjuntos-de-diferentes-estructuras-de-datos"><span class="toc-section-number">4.1</span> Subconjuntos de diferentes estructuras de datos</a><ul>
<li><a href="4-1-subconjuntos-de-diferentes-estructuras-de-datos.html#operadores-para-extraer-subconjuntos"><span class="toc-section-number">4.1.1</span> Operadores para extraer subconjuntos</a></li>
<li><a href="4-1-subconjuntos-de-diferentes-estructuras-de-datos.html#asignar-a-un-subconjunto"><span class="toc-section-number">4.1.2</span> Asignar a un subconjunto</a></li>
<li><a href="4-1-subconjuntos-de-diferentes-estructuras-de-datos.html#operadores-logicos"><span class="toc-section-number">4.1.3</span> Operadores lógicos</a></li>
</ul></li>
<li class="has-sub"><a href="4-2-aplicaciones.html#aplicaciones"><span class="toc-section-number">4.2</span> Aplicaciones</a><ul>
<li><a href="4-2-aplicaciones.html#buscarv-o-buscarh"><span class="toc-section-number">4.2.1</span> Buscarv o buscarh</a></li>
<li><a href="4-2-aplicaciones.html#muestras-aleatorias"><span class="toc-section-number">4.2.2</span> Muestras aleatorias</a></li>
<li><a href="4-2-aplicaciones.html#expande-bases"><span class="toc-section-number">4.2.3</span> Expande bases</a></li>
<li><a href="4-2-aplicaciones.html#which-intersect-y-union"><span class="toc-section-number">4.2.4</span> Which, intersect y union</a></li>
<li><a href="4-2-aplicaciones.html#generacion-de-datos-a-partir-de-distribuciones"><span class="toc-section-number">4.2.5</span> Generación de datos a partir de distribuciones</a></li>
</ul></li>
<li class="has-sub"><a href="4-3-split-apply-combine.html#split-apply-combine"><span class="toc-section-number">4.3</span> Split-apply-combine</a><ul>
<li><a href="4-3-split-apply-combine.html#apply"><span class="toc-section-number">4.3.1</span> apply</a></li>
<li><a href="4-3-split-apply-combine.html#lapply"><span class="toc-section-number">4.3.2</span> lapply</a></li>
<li><a href="4-3-split-apply-combine.html#sapply"><span class="toc-section-number">4.3.3</span> sapply</a></li>
<li><a href="4-3-split-apply-combine.html#mapply"><span class="toc-section-number">4.3.4</span> mapply</a></li>
<li><a href="4-3-split-apply-combine.html#tapply"><span class="toc-section-number">4.3.5</span> tapply</a></li>
<li><a href="4-3-split-apply-combine.html#by"><span class="toc-section-number">4.3.6</span> by</a></li>
<li><a href="4-3-split-apply-combine.html#replicate"><span class="toc-section-number">4.3.7</span> replicate</a></li>
<li><a href="4-3-split-apply-combine.html#puede-ser-mas-facil"><span class="toc-section-number">4.3.8</span> ¿Puede ser más fácil?</a></li>
</ul></li>
<li><a href="4-4-material-adicional-2.html#material-adicional-2"><span class="toc-section-number">4.4</span> Material adicional</a></li>
</ul></li>
<li class="has-sub"><a href="5-herramientas-basicas-para-un-proyecto-de-datos.html#herramientas-basicas-para-un-proyecto-de-datos"><span class="toc-section-number">5</span> Herramientas básicas para un proyecto de datos</a><ul>
<li class="has-sub"><a href="5-1-importacion-de-datos.html#importacion-de-datos"><span class="toc-section-number">5.1</span> Importación de datos</a><ul>
<li><a href="5-1-importacion-de-datos.html#rds"><span class="toc-section-number">5.1.1</span> rds</a></li>
<li><a href="5-1-importacion-de-datos.html#separado-por"><span class="toc-section-number">5.1.2</span> separado por *</a></li>
<li><a href="5-1-importacion-de-datos.html#csv"><span class="toc-section-number">5.1.3</span> csv (archivo separado por comas)</a></li>
<li><a href="5-1-importacion-de-datos.html#microsoft-excel"><span class="toc-section-number">5.1.4</span> Microsoft Excel</a></li>
<li><a href="5-1-importacion-de-datos.html#dbf"><span class="toc-section-number">5.1.5</span> dbf</a></li>
<li><a href="5-1-importacion-de-datos.html#ibm-spss"><span class="toc-section-number">5.1.6</span> IBM SPSS</a></li>
<li><a href="5-1-importacion-de-datos.html#stata"><span class="toc-section-number">5.1.7</span> Stata</a></li>
<li><a href="5-1-importacion-de-datos.html#sas"><span class="toc-section-number">5.1.8</span> SAS</a></li>
<li><a href="5-1-importacion-de-datos.html#google-spreadsheet"><span class="toc-section-number">5.1.9</span> Google Spreadsheet</a></li>
<li><a href="5-1-importacion-de-datos.html#google-bigquery"><span class="toc-section-number">5.1.10</span> Google bigquery</a></li>
<li><a href="5-1-importacion-de-datos.html#heroku-postgres"><span class="toc-section-number">5.1.11</span> Heroku Postgres</a></li>
<li><a href="5-1-importacion-de-datos.html#rdata"><span class="toc-section-number">5.1.12</span> rdata</a></li>
</ul></li>
<li class="has-sub"><a href="5-2-transformacion-de-datos.html#transformacion-de-datos"><span class="toc-section-number">5.2</span> Transformación de datos</a><ul>
<li><a href="5-2-transformacion-de-datos.html#tareas-comunes-en-la-manipulacion-de-datos"><span class="toc-section-number">5.2.1</span> Tareas comunes en la manipulación de datos</a></li>
<li><a href="5-2-transformacion-de-datos.html#extraccion-de-subconjuntos-de-observaciones"><span class="toc-section-number">5.2.2</span> Extracción de subconjuntos de observaciones</a></li>
<li><a href="5-2-transformacion-de-datos.html#extraccion-de-subconjuntos-de-variables-select"><span class="toc-section-number">5.2.3</span> Extracción de subconjuntos de variables (<em>select</em>)</a></li>
<li><a href="5-2-transformacion-de-datos.html#creacion-de-resumenes-de-datos"><span class="toc-section-number">5.2.4</span> Creación de resumenes de datos</a></li>
<li><a href="5-2-transformacion-de-datos.html#creacion-de-nuevas-variables"><span class="toc-section-number">5.2.5</span> Creación de nuevas variables</a></li>
<li><a href="5-2-transformacion-de-datos.html#combinacion-de-conjuntos-de-datos-joins"><span class="toc-section-number">5.2.6</span> Combinación de conjuntos de datos (<em>joins</em>)</a></li>
<li><a href="5-2-transformacion-de-datos.html#agrupar-datos"><span class="toc-section-number">5.2.7</span> Agrupar datos</a></li>
<li><a href="5-2-transformacion-de-datos.html#reorganizar-datos"><span class="toc-section-number">5.2.8</span> Reorganizar datos</a></li>
</ul></li>
<li class="has-sub"><a href="5-3-datos-limpios.html#datos-limpios"><span class="toc-section-number">5.3</span> Datos limpios</a><ul>
<li><a href="5-3-datos-limpios.html#datos-limpios-1"><span class="toc-section-number">5.3.1</span> Datos limpios</a></li>
<li><a href="5-3-datos-limpios.html#de-sucio-a-limpio"><span class="toc-section-number">5.3.2</span> De sucio a limpio</a></li>
</ul></li>
<li class="has-sub"><a href="5-4-visualizacion.html#visualizacion"><span class="toc-section-number">5.4</span> Visualización</a><ul>
<li><a href="5-4-visualizacion.html#la-gramatica-de-las-graficas"><span class="toc-section-number">5.4.1</span> La gramática de las gráficas</a></li>
<li><a href="5-4-visualizacion.html#que-es"><span class="toc-section-number">5.4.2</span> ¿Qué es?</a></li>
<li><a href="5-4-visualizacion.html#base-plotting-vs.ggplot"><span class="toc-section-number">5.4.3</span> Base plotting vs. ggplot</a></li>
<li><a href="5-4-visualizacion.html#ggplot"><span class="toc-section-number">5.4.4</span> ggplot</a></li>
<li><a href="5-4-visualizacion.html#caracteristicas-importantes"><span class="toc-section-number">5.4.5</span> Características importantes</a></li>
<li><a href="5-4-visualizacion.html#las-capas"><span class="toc-section-number">5.4.6</span> Las capas</a></li>
<li><a href="5-4-visualizacion.html#componentes-de-una-capa"><span class="toc-section-number">5.4.7</span> Componentes de una capa</a></li>
</ul></li>
<li><a href="5-5-material-adicional-3.html#material-adicional-3"><span class="toc-section-number">5.5</span> Material adicional</a></li>
</ul></li>
<li><a href="6-conclusion.html#conclusion"><span class="toc-section-number">6</span> Conclusión</a></li>
<li class="appendix"><span><b>Apéndices</b></span></li>
<li class="has-sub"><a href="A-markdown.html#markdown"><span class="toc-section-number">A</span> Markdown</a><ul>
<li><a href="A-1-encabezados.html#encabezados"><span class="toc-section-number">A.1</span> Encabezados</a></li>
<li><a href="A-2-lineas-horizontales.html#lineas-horizontales"><span class="toc-section-number">A.2</span> Lineas horizontales</a></li>
<li><a href="A-3-enfasis.html#enfasis"><span class="toc-section-number">A.3</span> Énfasis</a></li>
<li><a href="A-4-bloques.html#bloques"><span class="toc-section-number">A.4</span> Bloques</a></li>
<li><a href="A-5-listas-1.html#listas-1"><span class="toc-section-number">A.5</span> Listas</a></li>
<li><a href="A-6-links.html#links"><span class="toc-section-number">A.6</span> Links</a></li>
<li><a href="A-7-imagenes.html#imagenes"><span class="toc-section-number">A.7</span> Imágenes</a></li>
<li><a href="A-8-tablas.html#tablas"><span class="toc-section-number">A.8</span> Tablas</a></li>
<li><a href="A-9-html.html#html"><span class="toc-section-number">A.9</span> HTML</a></li>
<li><a href="A-10-codigo.html#codigo"><span class="toc-section-number">A.10</span> Código</a></li>
<li><a href="A-11-parrafos.html#parrafos"><span class="toc-section-number">A.11</span> Párrafos</a></li>
</ul></li>
<li class="has-sub"><a href="B-packrat.html#packrat"><span class="toc-section-number">B</span> Packrat</a><ul>
<li><a href="B-1-el-directorio-del-proyecto.html#el-directorio-del-proyecto"><span class="toc-section-number">B.1</span> El directorio del proyecto</a></li>
<li><a href="B-2-instalacion-1.html#instalacion-1"><span class="toc-section-number">B.2</span> Instalación</a></li>
<li><a href="B-3-r-markdown.html#r-markdown"><span class="toc-section-number">B.3</span> R Markdown</a></li>
</ul></li>
<li><a href="C-formatos.html#formatos"><span class="toc-section-number">C</span> Formatos</a></li>
<li><a href="bibliografia.html#bibliografia">Bibliografía</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="split-apply-combine" class="section level2">
<h2><span class="header-section-number">4.3</span> Split-apply-combine</h2>
<p>Muchos problemas en el análisis de datos pueden ser resueltos aplicando la estrategia separa, aplica y combina (SAC) en donde divides un problema en pequeños pedazos manejables, operas en forma independiente cada uno de éstos y después combinas los resultados obtenidos <span class="citation">(Wickham <a href="#ref-wickham2011split">2011</a>)</span>.</p>
<p>Esta estrategia se utiliza en diversas etapas del análisis de datos, por ejemplo <span class="citation">(Wickham <a href="#ref-wickham2011split">2011</a>)</span>:</p>
<ul>
<li><strong>Preparación de datos.</strong> Cuando se crean nuevas variables según grupos, cuando se realizan ordenamientos por grupos, cuando se estandariza o normaliza variables.</li>
<li><strong>Estadística descriptiva.</strong> Cuando se crean agregados por grupos como sus medias o medianas.</li>
<li><strong>Modelado</strong>. Cuando se calculan modelos separados para cada panel en un estudio de este tipo. Estos modelos pueden examinarse por separado o unificarse para construir modelos más sofisticados que los conjuguen.</li>
</ul>
<p>Esta estrategia se utiliza en muchas herramientas: en las tablas dinámicas de <code>Microsoft Excel</code>, el operador <code>group by</code> de <code>SQL</code>, el argumento <code>by</code> disponible en algunos procedimientos de <code>SAS</code> <span class="citation">(Wickham <a href="#ref-wickham2011split">2011</a>)</span>.</p>
<p>El paradigma split-apply-combine se resume en la figura <a href="4-3-split-apply-combine.html#fig:01s-a-c">4.1</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:01s-a-c"></span>
<img src="images/01_s-a-c.png" alt="Ejemplificación del split-apply-combine [@vaidyanathan2014r, Split-Apply-Combine]" width="75%" />
<p class="caption">
Figura 4.1: Ejemplificación del split-apply-combine <span class="citation">(Vaidyanathan <a href="#ref-vaidyanathan2014r">2014</a>, Split-Apply-Combine)</span>
</p>
</div>
<p>Replicamos los vectores <span class="math inline">\(x\)</span> y <span class="math inline">\(y\)</span> de la figura en un <em>dataframe</em>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">letras &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)
df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">x =</span> <span class="kw">sort</span>(letras[<span class="kw">rep</span>(<span class="kw">seq</span>(letras), <span class="dv">2</span>)]),
  <span class="dt">y =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">10</span>)
)
df</code></pre></div>
<pre><code>##   x  y
## 1 a  2
## 2 a  4
## 3 b  0
## 4 b  5
## 5 c  5
## 6 c 10</code></pre>
<p>Queremos estimar la <strong>media</strong> de los valores en el vector <span class="math inline">\(y\)</span> para cada tipo de letra en el vector <span class="math inline">\(x\)</span>. Esto lo podemos hacer utilizando la estrategia <strong>SAC</strong>, como en la figura.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Dividimos</span>
<span class="cf">for</span> (l <span class="cf">in</span> <span class="kw">unique</span>(df<span class="op">$</span>x) ){
  <span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&quot;Grupo con letra: &quot;</span>, l))
  <span class="kw">print</span>(df[l <span class="op">==</span><span class="st"> </span>df<span class="op">$</span>x, ])
}</code></pre></div>
<pre><code>## [1] &quot;Grupo con letra: a&quot;
##   x y
## 1 a 2
## 2 a 4
## [1] &quot;Grupo con letra: b&quot;
##   x y
## 3 b 0
## 4 b 5
## [1] &quot;Grupo con letra: c&quot;
##   x  y
## 5 c  5
## 6 c 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Aplicamos</span>
<span class="cf">for</span> (l <span class="cf">in</span> <span class="kw">unique</span>(df<span class="op">$</span>x) ){
  <span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&quot;Media para valores de letra: &quot;</span>, l))
  <span class="kw">print</span>(<span class="kw">mean</span>(df[l <span class="op">==</span><span class="st"> </span>df<span class="op">$</span>x, ]<span class="op">$</span>y))
}</code></pre></div>
<pre><code>## [1] &quot;Media para valores de letra: a&quot;
## [1] 3
## [1] &quot;Media para valores de letra: b&quot;
## [1] 2.5
## [1] &quot;Media para valores de letra: c&quot;
## [1] 7.5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Combinamos</span>
medias &lt;-<span class="st"> </span><span class="kw">list</span>()
<span class="cf">for</span> (l <span class="cf">in</span> <span class="kw">unique</span>(df<span class="op">$</span>x) ){
  medias[[l]] &lt;-<span class="st"> </span><span class="kw">mean</span>(df[l <span class="op">==</span><span class="st"> </span>df<span class="op">$</span>x, ]<span class="op">$</span>y)
}
<span class="kw">as.data.frame</span>(<span class="kw">list</span>(<span class="dt">letras =</span> <span class="kw">names</span>(medias), <span class="dt">medias =</span> <span class="kw">unname</span>(<span class="kw">unlist</span>(medias))))</code></pre></div>
<pre><code>##   letras medias
## 1      a    3.0
## 2      b    2.5
## 3      c    7.5</code></pre>
<p><code>R</code> tiene muchas funciones que facilitan realizar este tipo de operaciones. En particular, la familia <code>apply</code> fue pensada para realizarlas. Cada una de las funciones en esta familia recibe una estructura de datos en particular, aplica de determinada manera la función que se le especifica y combina los resultados de una forma específica.</p>
<div id="apply" class="section level3">
<h3><span class="header-section-number">4.3.1</span> apply</h3>
<p><code>apply</code> aplica una función a cada fila o columna en una matriz.</p>
<ol style="list-style-type: decimal">
<li><strong>Separa</strong>: por columna o fila según se especifica en el parámetro <code>MARGIN</code> (1 para filas, 2 para columnas).</li>
<li><strong>Aplica</strong>: la función que se especifica en el parámetro <code>FUN</code>.</li>
<li><strong>Combina</strong>: regresa un vector con los resultados.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">6</span><span class="op">:</span><span class="dv">10</span>), <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)
<span class="co"># 1 is the row index 2 is the column index</span>
m</code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(m, <span class="dv">1</span>, sum)</code></pre></div>
<pre><code>## [1]  7  9 11 13 15</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(m, <span class="dv">2</span>, sum)</code></pre></div>
<pre><code>## [1] 15 40</code></pre>
<div class="ejercicio">
<p>
<strong>Ejercicio</strong>
</p>
<p>
Haz una función que reciba un vector y devuelva la suma de la posición <span class="math inline"><span class="math inline">\(v_i + v_{i + 1}\)</span></span>. Para el n-esimo elemento, suma el primero. Aplica esa función a las columnas y filas de la matriz m.
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Respuesta</span>
suma.rec &lt;-<span class="st"> </span><span class="cf">function</span>(v){
  resultado &lt;-<span class="st"> </span><span class="kw">c</span>()
  <span class="cf">for</span> (e <span class="cf">in</span> <span class="kw">seq</span>(<span class="kw">length</span>(v) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)){
    resultado[e] &lt;-<span class="st"> </span>v[e] <span class="op">+</span><span class="st"> </span>v[e <span class="op">+</span><span class="st"> </span><span class="dv">1</span>]
  }
  resultado[<span class="kw">length</span>(v)] &lt;-<span class="st"> </span>v[<span class="kw">length</span>(v)] <span class="op">+</span><span class="st"> </span>v[<span class="dv">1</span>]
  <span class="kw">return</span>(resultado)
}

m
<span class="kw">apply</span>(m, <span class="dv">1</span>, suma.rec)
<span class="kw">apply</span>(m, <span class="dv">2</span>, suma.rec)</code></pre></div>
</div>
<div id="lapply" class="section level3">
<h3><span class="header-section-number">4.3.2</span> lapply</h3>
<p><code>lapply</code> aplica una función a cada elemento en una lista. Como sabemos, un <code>data.frame</code> es únicamente un estilo particular de lista tal que todos sus elementos tienen el mismo tamaño. Por ende, también podemos utilizar <code>lapply</code> para iterar sobre las columnas de un <code>data.frame</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lista &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">b =</span> <span class="dv">2</span><span class="op">:</span><span class="dv">20</span>)
<span class="kw">lapply</span>(lista, mean)</code></pre></div>
<pre><code>## $a
## [1] 5.5
## 
## $b
## [1] 11</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">b =</span> <span class="dv">11</span><span class="op">:</span><span class="dv">20</span>)
<span class="kw">lapply</span>(df, mean)</code></pre></div>
<pre><code>## $a
## [1] 5.5
## 
## $b
## [1] 15.5</code></pre>
<div class="ejercicio">
<p>
<strong>Ejercicio</strong>
</p>
<p>
El <code>summary</code> de un <code>data.frame</code> genera un resumen para los vectores que la conforman de acuerdo a la clase de la misma. Genera una función que regrese una tabla de frecuencias para factores y caracteres o una lista con media, desviación estándar para vectores numéricos o enteros. Aplícalo a la base diamonds usando lapply.
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Respuesta</span>
mi.resumen &lt;-<span class="st"> </span><span class="cf">function</span>(vector){
  <span class="cf">if</span>( <span class="kw">class</span>(vector) <span class="op">==</span><span class="st"> &quot;factor&quot;</span> <span class="op">||</span><span class="st"> </span><span class="kw">class</span>(vector) <span class="op">==</span><span class="st"> &quot;character&quot;</span>){
    <span class="kw">table</span>(vector)
  } <span class="cf">else</span> <span class="cf">if</span> ( <span class="kw">class</span>(vector) <span class="op">==</span><span class="st"> &quot;numeric&quot;</span> <span class="op">||</span><span class="st"> </span><span class="kw">class</span>(vector) <span class="op">==</span><span class="st"> &quot;integer&quot;</span>) {
    <span class="kw">list</span>(<span class="dt">media =</span> <span class="kw">mean</span>(vector), <span class="dt">de =</span> <span class="kw">sqrt</span>(<span class="kw">var</span>(vector)))
  }
}

<span class="kw">lapply</span>(<span class="kw">names</span>(diamonds), <span class="dt">FUN =</span> <span class="cf">function</span>(c) <span class="kw">mi.resumen</span>(diamonds[, c]))</code></pre></div>
</div>
<div id="sapply" class="section level3">
<h3><span class="header-section-number">4.3.3</span> sapply</h3>
<p><code>sapply</code> es otra versión de <code>lapply</code> que regresa una lista o un vector, dependiendo si se especifica el parámetro <code>simplify = T</code> y si la función aplicada regresa un único valor.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">sapply</span>(lista, mean, <span class="dt">simplify =</span> F)
x</code></pre></div>
<pre><code>## $a
## [1] 5.5
## 
## $b
## [1] 11</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">sapply</span>(lista, mean, <span class="dt">simplify =</span> T)
x</code></pre></div>
<pre><code>##    a    b 
##  5.5 11.0</code></pre>
<div class="ejercicio">
<p>
<strong>Ejercicio</strong>
</p>
<p>
Obtén un vector tipo caracter con los nombres de las clases de las columnas de iris.
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Respuesta</span>
<span class="kw">sapply</span>(iris, class)</code></pre></div>
<div class="ejercicio">
<p>
<strong>Ejercicio</strong>
</p>
<p>
Repite el ejercicio de la suma rara pero usa <code>sapply</code>.
</p>
<p>
<em>Recuerda la instrucción</em>: Haz una función que reciba un vector y devuelva la suma de la posición <span class="math inline"><span class="math inline">\(v_i + v_{i + 1}\)</span></span>. Para el n-esimo elemento, suma el primero. Utiliza <code>sapply</code> para realizar esta operacion.
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Respuesta</span>
x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
<span class="kw">sapply</span>(<span class="kw">seq</span>(x), <span class="dt">FUN =</span> <span class="cf">function</span>(i){
  <span class="cf">if</span>( i <span class="op">==</span><span class="st"> </span><span class="kw">length</span>(x) ){
    x[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>x[i]
  } <span class="cf">else</span> {
    x[i] <span class="op">+</span><span class="st"> </span>x[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>]
  }
})</code></pre></div>
</div>
<div id="mapply" class="section level3">
<h3><span class="header-section-number">4.3.4</span> mapply</h3>
<p><code>mapply</code> es como la versión multivariada de <code>sapply</code>. Le aplica una función a todos los elementos correspondientes de un argumento.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l1 &lt;-<span class="kw">list</span>(<span class="dt">a =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>), <span class="dt">b =</span> <span class="kw">c</span>(<span class="dv">6</span><span class="op">:</span><span class="dv">10</span>))
l2 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">c =</span> <span class="kw">c</span>(<span class="dv">11</span><span class="op">:</span><span class="dv">15</span>), <span class="dt">d =</span> <span class="kw">c</span>(<span class="dv">16</span><span class="op">:</span><span class="dv">20</span>))
l1</code></pre></div>
<pre><code>## $a
## [1] 1 2 3 4 5
## 
## $b
## [1]  6  7  8  9 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l2</code></pre></div>
<pre><code>## $c
## [1] 11 12 13 14 15
## 
## $d
## [1] 16 17 18 19 20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mapply</span>(sum, l1<span class="op">$</span>a, l1<span class="op">$</span>b, l2<span class="op">$</span>c, l2<span class="op">$</span>d)</code></pre></div>
<pre><code>## [1] 34 38 42 46 50</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l1[[<span class="st">&quot;a&quot;</span>]][<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>l1[[<span class="st">&quot;b&quot;</span>]][<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>l2[[<span class="st">&quot;c&quot;</span>]][<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>l2[[<span class="st">&quot;d&quot;</span>]][<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] 34</code></pre>
<div class="ejercicio">
<p>
<strong>Ejercicio</strong>
</p>
<p>
Crea una matriz de 4 x 4 donde el primer renglón sea de unos, el segundo de dos, el tercero de 3 y el cuarto de 4. Usa <code>mapply</code> para hacerlo.
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Respuesta</span>
m &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">4</span>), <span class="kw">rep</span>(<span class="dv">2</span>, <span class="dv">4</span>), <span class="kw">rep</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="kw">rep</span>(<span class="dv">4</span>, <span class="dv">4</span>)), <span class="dt">nrow =</span> <span class="dv">4</span>, <span class="dt">byrow =</span> T)
m

me &lt;-<span class="st"> </span><span class="kw">t</span>(<span class="kw">mapply</span>(rep, <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">4</span>))
me</code></pre></div>
</div>
<div id="tapply" class="section level3">
<h3><span class="header-section-number">4.3.5</span> tapply</h3>
<p><code>tapply</code> le aplica una función a subconjuntos de un vector.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(warpbreaks)</code></pre></div>
<pre><code>##   breaks wool tension
## 1     26    A       L
## 2     30    A       L
## 3     54    A       L
## 4     25    A       L
## 5     70    A       L
## 6     52    A       L</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(warpbreaks, <span class="kw">tapply</span>(breaks, <span class="kw">list</span>(wool, tension), mean))</code></pre></div>
<pre><code>##          L        M        H
## A 44.55556 24.00000 24.55556
## B 28.22222 28.77778 18.77778</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(warpbreaks<span class="op">$</span>breaks, 
       <span class="kw">list</span>(<span class="dt">wool =</span> warpbreaks<span class="op">$</span>wool, <span class="dt">tension =</span> warpbreaks<span class="op">$</span>tension), 
       mean)</code></pre></div>
<pre><code>##     tension
## wool        L        M        H
##    A 44.55556 24.00000 24.55556
##    B 28.22222 28.77778 18.77778</code></pre>
<div class="ejercicio">
<p>
<strong>Ejercicio</strong>
</p>
<p>
Utiliza la función <code>tapply</code> y la base de datos <code>diamonds</code> (que está dentro del paquete <code>ggplot2</code>) para obtener las medias de la variable <code>carat</code> para los grupos formados por la variable categórica <code>cut</code> y la variable categórica <code>color</code>.
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Respuesta</span>
<span class="kw">library</span>(ggplot2)
<span class="kw">with</span>(diamonds,
     <span class="kw">tapply</span>(carat,
            <span class="kw">list</span>(cut, color),
            mean))</code></pre></div>
</div>
<div id="by" class="section level3">
<h3><span class="header-section-number">4.3.6</span> by</h3>
<p><code>by</code> le aplica una función a subconjuntos de un <code>data.frame</code>. Se divide un data.frame según los valores de de uno o más factores. Se aplica la función FUN a cada subconjunto.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(iris)</code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">by</span>(<span class="dt">data =</span> iris[, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>], <span class="dt">INDICES =</span> iris[, <span class="st">&quot;Species&quot;</span>], <span class="dt">FUN =</span> summary)</code></pre></div>
<pre><code>## iris[, &quot;Species&quot;]: setosa
##   Sepal.Length    Sepal.Width   
##  Min.   :4.300   Min.   :2.300  
##  1st Qu.:4.800   1st Qu.:3.200  
##  Median :5.000   Median :3.400  
##  Mean   :5.006   Mean   :3.428  
##  3rd Qu.:5.200   3rd Qu.:3.675  
##  Max.   :5.800   Max.   :4.400  
## -------------------------------------------------------- 
## iris[, &quot;Species&quot;]: versicolor
##   Sepal.Length    Sepal.Width   
##  Min.   :4.900   Min.   :2.000  
##  1st Qu.:5.600   1st Qu.:2.525  
##  Median :5.900   Median :2.800  
##  Mean   :5.936   Mean   :2.770  
##  3rd Qu.:6.300   3rd Qu.:3.000  
##  Max.   :7.000   Max.   :3.400  
## -------------------------------------------------------- 
## iris[, &quot;Species&quot;]: virginica
##   Sepal.Length    Sepal.Width   
##  Min.   :4.900   Min.   :2.200  
##  1st Qu.:6.225   1st Qu.:2.800  
##  Median :6.500   Median :3.000  
##  Mean   :6.588   Mean   :2.974  
##  3rd Qu.:6.900   3rd Qu.:3.175  
##  Max.   :7.900   Max.   :3.800</code></pre>
<p>Puedo calcular, por ejemplo, la suma de los valores del largo y ancho de los sépalos en la base de datos iris según la especie.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res &lt;-<span class="st"> </span><span class="kw">by</span>(iris[, <span class="kw">c</span>(<span class="st">&quot;Sepal.Length&quot;</span>, <span class="st">&quot;Sepal.Width&quot;</span>)], iris[, <span class="st">&quot;Species&quot;</span>], sum)</code></pre></div>
<p>Posteriormente, se pueden combinar los elementos.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.data.frame</span>(<span class="kw">list</span>(
  <span class="st">&quot;species&quot;</span> =<span class="st"> </span><span class="kw">names</span>(res), 
  <span class="st">&quot;suma&quot;</span> =<span class="st"> </span><span class="kw">sapply</span>(<span class="kw">seq</span>(<span class="kw">length</span>(res)), <span class="dt">FUN =</span> <span class="cf">function</span>(i) res[[i]])
  ))</code></pre></div>
<pre><code>##      species  suma
## 1     setosa 421.7
## 2 versicolor 435.3
## 3  virginica 478.1</code></pre>
<div class="ejercicio">
<p>
<strong>Ejercicio</strong>
</p>
<p>
Vuelve a utilizar la base de diamonds para calcular el promedio de carat según cut y color.
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Respuesta</span>
<span class="kw">library</span>(ggplot2)
<span class="kw">head</span>(diamonds)

res &lt;-<span class="st"> </span><span class="kw">by</span>(diamonds[, <span class="kw">c</span>(<span class="st">&quot;carat&quot;</span>)], 
          <span class="kw">list</span>(<span class="dt">cut =</span> <span class="kw">as.factor</span>(diamonds<span class="op">$</span>cut)
               , <span class="dt">color =</span> <span class="kw">as.factor</span>(diamonds<span class="op">$</span>color))
          , mean, <span class="dt">simplify =</span> T)</code></pre></div>
</div>
<div id="replicate" class="section level3">
<h3><span class="header-section-number">4.3.7</span> replicate</h3>
<p><code>replicate</code> es una función muy útil sobretodo en el contexto de simulación.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">replicate</span>(<span class="dv">5</span>, <span class="kw">rnorm</span>(<span class="dv">5</span>), <span class="dt">simplify =</span> F)</code></pre></div>
<pre><code>## [[1]]
## [1] -0.01744899 -0.35920817 -1.46121725 -0.82974515  0.53160175
## 
## [[2]]
## [1] -0.2601847  0.5065636  1.3330763 -1.4945952  0.8039902
## 
## [[3]]
## [1] -0.2155771 -0.8922644 -0.1466588 -0.3234650 -1.0602366
## 
## [[4]]
## [1] -1.4859165  1.4469633  1.5193526  1.4491572  0.3427115
## 
## [[5]]
## [1] -0.94652506 -1.25920627 -0.06813108 -0.75359982  0.43192663</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">replicate</span>(<span class="dv">6</span>, <span class="kw">rnorm</span>(<span class="dv">4</span>), <span class="dt">simplify =</span> T)</code></pre></div>
<pre><code>##             [,1]       [,2]       [,3]       [,4]        [,5]       [,6]
## [1,]  0.12276245  0.4528315 -0.1228450 -1.5292287 -0.42799037  0.6360040
## [2,]  0.00389876 -0.4863693 -2.4085836 -0.7545786  1.92098812  0.3017047
## [3,] -0.80426655  0.1570096  0.1789978  1.6316763  0.03015651  1.4364364
## [4,]  0.12613563 -0.4231777 -0.7788772  0.6512902 -0.21573077 -0.7753874</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(<span class="kw">replicate</span>(<span class="dv">100</span>, <span class="kw">mean</span>(<span class="kw">rexp</span>(<span class="dv">10</span>))))</code></pre></div>
<p><img src="aprendeR_files/figure-html/unnamed-chunk-194-1.png" width="672" /></p>
<div class="ejercicio">
<p>
<strong>Ejercicio</strong>
</p>
<p>
Replica el ejercicio de muestras bootstrap utilizando la función <code>replicate</code>.
</p>
<p>
<em>Recordando las instrucciones</em>:
</p>
<ol style="list-style-type: decimal">
<li>
Genera un vector <code>x</code> de tamaño <span class="math inline"><span class="math inline">\(1000\)</span></span> con realizaciones de una normal media <span class="math inline"><span class="math inline">\(10\)</span></span>, varianza <span class="math inline"><span class="math inline">\(3\)</span></span>.
</li>
<li>
Crea <span class="math inline"><span class="math inline">\(100\)</span></span> muestras bootstrap del vector <span class="math inline"><span class="math inline">\(x\)</span></span>.
</li>
<li>
Calcula la <em>media</em> para cada una de tus muestras.
</li>
<li>
Grafica con la función <code>hist()</code> el vector de medias de tus muestras.
</li>
</ol>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Respuesta</span>
<span class="co"># 1</span>
x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1000</span>, <span class="dt">mean =</span> <span class="dv">10</span>, <span class="dt">sd =</span> <span class="kw">sqrt</span>(<span class="dv">3</span>))
<span class="kw">hist</span>( <span class="co"># 4</span>
  <span class="kw">replicate</span>(<span class="dv">100</span>, <span class="co"># 2</span>
            <span class="kw">mean</span>(<span class="kw">sample</span>(x, <span class="dt">size =</span> <span class="dv">1000</span>, <span class="dt">replace =</span> T))), <span class="co"># 3</span>
  <span class="dt">main =</span> <span class="st">&quot;Muestras bootstrap&quot;</span>,
  <span class="dt">xlab =</span> <span class="st">&quot;media&quot;</span>,
  <span class="dt">ylab =</span> <span class="st">&quot;frecuencia&quot;</span>
)</code></pre></div>
</div>
<div id="puede-ser-mas-facil" class="section level3">
<h3><span class="header-section-number">4.3.8</span> ¿Puede ser más fácil?</h3>
<p>La familia <code>apply</code> viene con R básico. Sin embargo, hay 3 implementaciones excelentes del paradigma split-apply-combine: <code>plyr</code>, <code>dplyr</code> y <code>data.table</code>.</p>
<p>Si la familia apply es poderosa, se queda corta comparada con estos tres. <code>plyr</code> es la primera versión de SAC de Wickham <span class="citation">(Wickham <a href="#ref-wickham2011split">2011</a>)</span>. Posteriormente, mejoró muchas de las funciones en <code>dplyr</code> <span class="citation">(Wickham and Francois, n.d.)</span> sobretodo entorno a velocidad y facilidad de uso. <code>plyr</code> no termina de ser relevante pues varias de sus funciones aun no están en <code>dplyr</code> pero está por ser sustituido.</p>
<p><code>data.table</code> <span class="citation">(Dowle et al. <a href="#ref-datatable">2015</a>)</span>, es una implementación con una tradición muy diferente y tiene también funciones muy poderosas aunque con una sintaxis muy distinta a <code>dplyr</code>. Es absurdamente eficiente y tiene múltiples aplicaciones.</p>
<p>Muchas de las funciones en <code>dplyr</code> también están implementadas en <code>data.table</code>. Ambos paquetes son útiles pero priorizan distintos elementos. En el capítulo siguiente se repasarán los verbos en <code>dplyr</code>.</p>
</div>
</div>
<h3>Bibliografía</h3>
<div id="refs" class="references">
<div id="ref-wickham2011split">
<p>Wickham, Hadley. 2011. “The Split-Apply-Combine Strategy for Data Analysis.” <em>Journal of Statistical Software</em> 40 (1): 1–29.</p>
</div>
<div id="ref-vaidyanathan2014r">
<p>Vaidyanathan, Ramnath. 2014. <em>Introduction to R</em>. Github books, en pycon 2014. <a href="https://ramnathv.github.io/pycon2014-r" class="uri">https://ramnathv.github.io/pycon2014-r</a>.</p>
</div>
<div id="ref-datatable">
<p>Dowle, M, A Srinivasan, T Short, S Lianoglou with contributions from R Saporta, and E Antonyan. 2015. <em>Data.table: Extension of Data.frame</em>. <a href="https://CRAN.R-project.org/package=data.table" class="uri">https://CRAN.R-project.org/package=data.table</a>.</p>
</div>
</div>
<p style="text-align: center;">
<a href="4-2-aplicaciones.html"><button class="btn btn-default">Previous</button></a>
<a href="4-4-material-adicional-2.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
