<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="aprendeR" />
<meta property="og:type" content="book" />





<meta name="author" content="Andrea Fernández Conde" />


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="aprendeR">

<title>aprendeR</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link rel="stylesheet" href="estilos.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#introduccion"><span class="toc-section-number">1</span> Introducción</a></li>
<li class="has-sub"><a href="2-r-lo-basico.html#r-lo-basico"><span class="toc-section-number">2</span> R: lo básico</a><ul>
<li><a href="2-1-instalacion.html#instalacion"><span class="toc-section-number">2.1</span> Instalación</a></li>
<li class="has-sub"><a href="2-2-editores.html#editores"><span class="toc-section-number">2.2</span> Editores</a><ul>
<li><a href="2-2-editores.html#rstudio"><span class="toc-section-number">2.2.1</span> RStudio</a></li>
<li><a href="2-2-editores.html#ess"><span class="toc-section-number">2.2.2</span> ESS</a></li>
</ul></li>
<li class="has-sub"><a href="2-3-el-espacio-de-trabajo-workspace.html#el-espacio-de-trabajo-workspace"><span class="toc-section-number">2.3</span> El espacio de trabajo (Workspace)</a><ul>
<li><a href="2-3-el-espacio-de-trabajo-workspace.html#directorio-de-trabajo"><span class="toc-section-number">2.3.1</span> Directorio de trabajo</a></li>
<li><a href="2-3-el-espacio-de-trabajo-workspace.html#ejemplos-basicos"><span class="toc-section-number">2.3.2</span> Ejemplos básicos</a></li>
<li><a href="2-3-el-espacio-de-trabajo-workspace.html#comandos-utiles"><span class="toc-section-number">2.3.3</span> Comandos útiles</a></li>
</ul></li>
<li class="has-sub"><a href="2-4-paquetes-libraries.html#paquetes-libraries"><span class="toc-section-number">2.4</span> Paquetes (<em>libraries</em>)</a><ul>
<li><a href="2-4-paquetes-libraries.html#cran"><span class="toc-section-number">2.4.1</span> CRAN</a></li>
<li><a href="2-4-paquetes-libraries.html#github"><span class="toc-section-number">2.4.2</span> Github</a></li>
<li><a href="2-4-paquetes-libraries.html#otras-fuentes"><span class="toc-section-number">2.4.3</span> Otras fuentes</a></li>
</ul></li>
<li><a href="2-5-paquetes-recomendados.html#paquetes-recomendados"><span class="toc-section-number">2.5</span> Paquetes recomendados</a></li>
<li><a href="2-6-scripting.html#scripting"><span class="toc-section-number">2.6</span> Scripting</a></li>
<li class="has-sub"><a href="2-7-rmarkdown.html#rmarkdown"><span class="toc-section-number">2.7</span> rmarkdown</a><ul>
<li><a href="2-7-rmarkdown.html#encabezado-y-formatos"><span class="toc-section-number">2.7.1</span> Encabezado y formatos</a></li>
<li><a href="2-7-rmarkdown.html#knitr-chunks"><span class="toc-section-number">2.7.2</span> Knitr chunks</a></li>
</ul></li>
<li><a href="2-8-ayuda-y-documentacion.html#ayuda-y-documentacion"><span class="toc-section-number">2.8</span> Ayuda y documentación</a></li>
<li><a href="2-9-optimizando.html#optimizando"><span class="toc-section-number">2.9</span> Optimizando</a></li>
<li><a href="2-10-material-adicional.html#material-adicional"><span class="toc-section-number">2.10</span> Material adicional</a></li>
</ul></li>
<li class="has-sub"><a href="3-estructuras-y-funciones.html#estructuras-y-funciones"><span class="toc-section-number">3</span> Estructuras y funciones</a><ul>
<li><a href="3-1-objetos.html#objetos"><span class="toc-section-number">3.1</span> Objetos</a></li>
<li class="has-sub"><a href="3-2-funciones.html#funciones"><span class="toc-section-number">3.2</span> Funciones</a><ul>
<li><a href="3-2-funciones.html#componentes-de-una-funcion"><span class="toc-section-number">3.2.1</span> Componentes de una función</a></li>
<li><a href="3-2-funciones.html#el-ambiente"><span class="toc-section-number">3.2.2</span> El ambiente</a></li>
<li><a href="3-2-funciones.html#reglas-de-visibilidad-scoping"><span class="toc-section-number">3.2.3</span> Reglas de visibilidad (scoping)</a></li>
</ul></li>
<li class="has-sub"><a href="3-3-estructuras-de-datos.html#estructuras-de-datos"><span class="toc-section-number">3.3</span> Estructuras de datos</a><ul>
<li><a href="3-3-estructuras-de-datos.html#clases-atomicas-atomic-classes"><span class="toc-section-number">3.3.1</span> Clases atómicas (atomic classes)</a></li>
<li><a href="3-3-estructuras-de-datos.html#vectores"><span class="toc-section-number">3.3.2</span> Vectores</a></li>
<li><a href="3-3-estructuras-de-datos.html#matrices"><span class="toc-section-number">3.3.3</span> Matrices</a></li>
<li><a href="3-3-estructuras-de-datos.html#listas"><span class="toc-section-number">3.3.4</span> Listas</a></li>
<li><a href="3-3-estructuras-de-datos.html#factores-factor"><span class="toc-section-number">3.3.5</span> Factores (factor)</a></li>
<li><a href="3-3-estructuras-de-datos.html#data-frames"><span class="toc-section-number">3.3.6</span> Data frames</a></li>
</ul></li>
<li class="has-sub"><a href="3-4-estructuras-de-datos-fuera-de-r-basico.html#estructuras-de-datos-fuera-de-r-basico"><span class="toc-section-number">3.4</span> Estructuras de datos fuera de R-básico</a><ul>
<li><a href="3-4-estructuras-de-datos-fuera-de-r-basico.html#data-tables"><span class="toc-section-number">3.4.1</span> Data tables</a></li>
<li><a href="3-4-estructuras-de-datos-fuera-de-r-basico.html#tibbles"><span class="toc-section-number">3.4.2</span> Tibbles</a></li>
</ul></li>
<li class="has-sub"><a href="3-5-objetos-importantes.html#objetos-importantes"><span class="toc-section-number">3.5</span> Objetos importantes</a><ul>
<li><a href="3-5-objetos-importantes.html#infinito"><span class="toc-section-number">3.5.1</span> Infinito</a></li>
<li><a href="3-5-objetos-importantes.html#no-es-un-numero"><span class="toc-section-number">3.5.2</span> No es un número</a></li>
<li><a href="3-5-objetos-importantes.html#valores-perdidos-missing-values"><span class="toc-section-number">3.5.3</span> Valores perdidos (missing values)</a></li>
</ul></li>
<li class="has-sub"><a href="3-6-estructuras-de-control.html#estructuras-de-control"><span class="toc-section-number">3.6</span> Estructuras de control</a><ul>
<li><a href="3-6-estructuras-de-control.html#if"><span class="toc-section-number">3.6.1</span> If</a></li>
<li><a href="3-6-estructuras-de-control.html#for"><span class="toc-section-number">3.6.2</span> For</a></li>
<li><a href="3-6-estructuras-de-control.html#whiles"><span class="toc-section-number">3.6.3</span> Whiles</a></li>
<li><a href="3-6-estructuras-de-control.html#repeat---break"><span class="toc-section-number">3.6.4</span> Repeat - Break</a></li>
<li><a href="3-6-estructuras-de-control.html#next"><span class="toc-section-number">3.6.5</span> Next</a></li>
</ul></li>
<li><a href="3-7-material-adicional-1.html#material-adicional-1"><span class="toc-section-number">3.7</span> Material adicional</a></li>
</ul></li>
<li class="has-sub"><a href="4-vectorizacion-la-familia-apply-y-otros.html#vectorizacion-la-familia-apply-y-otros"><span class="toc-section-number">4</span> Vectorización, la familia apply y otros</a><ul>
<li class="has-sub"><a href="4-1-subconjuntos-de-diferentes-estructuras-de-datos.html#subconjuntos-de-diferentes-estructuras-de-datos"><span class="toc-section-number">4.1</span> Subconjuntos de diferentes estructuras de datos</a><ul>
<li><a href="4-1-subconjuntos-de-diferentes-estructuras-de-datos.html#operadores-para-extraer-subconjuntos"><span class="toc-section-number">4.1.1</span> Operadores para extraer subconjuntos</a></li>
<li><a href="4-1-subconjuntos-de-diferentes-estructuras-de-datos.html#asignar-a-un-subconjunto"><span class="toc-section-number">4.1.2</span> Asignar a un subconjunto</a></li>
<li><a href="4-1-subconjuntos-de-diferentes-estructuras-de-datos.html#operadores-logicos"><span class="toc-section-number">4.1.3</span> Operadores lógicos</a></li>
</ul></li>
<li class="has-sub"><a href="4-2-aplicaciones.html#aplicaciones"><span class="toc-section-number">4.2</span> Aplicaciones</a><ul>
<li><a href="4-2-aplicaciones.html#buscarv-o-buscarh"><span class="toc-section-number">4.2.1</span> Buscarv o buscarh</a></li>
<li><a href="4-2-aplicaciones.html#muestras-aleatorias"><span class="toc-section-number">4.2.2</span> Muestras aleatorias</a></li>
<li><a href="4-2-aplicaciones.html#expande-bases"><span class="toc-section-number">4.2.3</span> Expande bases</a></li>
<li><a href="4-2-aplicaciones.html#which-intersect-y-union"><span class="toc-section-number">4.2.4</span> Which, intersect y union</a></li>
<li><a href="4-2-aplicaciones.html#generacion-de-datos-a-partir-de-distribuciones"><span class="toc-section-number">4.2.5</span> Generación de datos a partir de distribuciones</a></li>
</ul></li>
<li class="has-sub"><a href="4-3-split-apply-combine.html#split-apply-combine"><span class="toc-section-number">4.3</span> Split-apply-combine</a><ul>
<li><a href="4-3-split-apply-combine.html#apply"><span class="toc-section-number">4.3.1</span> apply</a></li>
<li><a href="4-3-split-apply-combine.html#lapply"><span class="toc-section-number">4.3.2</span> lapply</a></li>
<li><a href="4-3-split-apply-combine.html#sapply"><span class="toc-section-number">4.3.3</span> sapply</a></li>
<li><a href="4-3-split-apply-combine.html#mapply"><span class="toc-section-number">4.3.4</span> mapply</a></li>
<li><a href="4-3-split-apply-combine.html#tapply"><span class="toc-section-number">4.3.5</span> tapply</a></li>
<li><a href="4-3-split-apply-combine.html#by"><span class="toc-section-number">4.3.6</span> by</a></li>
<li><a href="4-3-split-apply-combine.html#replicate"><span class="toc-section-number">4.3.7</span> replicate</a></li>
<li><a href="4-3-split-apply-combine.html#puede-ser-mas-facil"><span class="toc-section-number">4.3.8</span> ¿Puede ser más fácil?</a></li>
</ul></li>
<li><a href="4-4-material-adicional-2.html#material-adicional-2"><span class="toc-section-number">4.4</span> Material adicional</a></li>
</ul></li>
<li class="has-sub"><a href="5-herramientas-basicas-para-un-proyecto-de-datos.html#herramientas-basicas-para-un-proyecto-de-datos"><span class="toc-section-number">5</span> Herramientas básicas para un proyecto de datos</a><ul>
<li class="has-sub"><a href="5-1-importacion-de-datos.html#importacion-de-datos"><span class="toc-section-number">5.1</span> Importación de datos</a><ul>
<li><a href="5-1-importacion-de-datos.html#rds"><span class="toc-section-number">5.1.1</span> rds</a></li>
<li><a href="5-1-importacion-de-datos.html#separado-por"><span class="toc-section-number">5.1.2</span> separado por *</a></li>
<li><a href="5-1-importacion-de-datos.html#csv"><span class="toc-section-number">5.1.3</span> csv (archivo separado por comas)</a></li>
<li><a href="5-1-importacion-de-datos.html#microsoft-excel"><span class="toc-section-number">5.1.4</span> Microsoft Excel</a></li>
<li><a href="5-1-importacion-de-datos.html#dbf"><span class="toc-section-number">5.1.5</span> dbf</a></li>
<li><a href="5-1-importacion-de-datos.html#ibm-spss"><span class="toc-section-number">5.1.6</span> IBM SPSS</a></li>
<li><a href="5-1-importacion-de-datos.html#stata"><span class="toc-section-number">5.1.7</span> Stata</a></li>
<li><a href="5-1-importacion-de-datos.html#sas"><span class="toc-section-number">5.1.8</span> SAS</a></li>
<li><a href="5-1-importacion-de-datos.html#google-spreadsheet"><span class="toc-section-number">5.1.9</span> Google Spreadsheet</a></li>
<li><a href="5-1-importacion-de-datos.html#google-bigquery"><span class="toc-section-number">5.1.10</span> Google bigquery</a></li>
<li><a href="5-1-importacion-de-datos.html#heroku-postgres"><span class="toc-section-number">5.1.11</span> Heroku Postgres</a></li>
<li><a href="5-1-importacion-de-datos.html#rdata"><span class="toc-section-number">5.1.12</span> rdata</a></li>
</ul></li>
<li class="has-sub"><a href="5-2-transformacion-de-datos.html#transformacion-de-datos"><span class="toc-section-number">5.2</span> Transformación de datos</a><ul>
<li><a href="5-2-transformacion-de-datos.html#tareas-comunes-en-la-manipulacion-de-datos"><span class="toc-section-number">5.2.1</span> Tareas comunes en la manipulación de datos</a></li>
<li><a href="5-2-transformacion-de-datos.html#extraccion-de-subconjuntos-de-observaciones"><span class="toc-section-number">5.2.2</span> Extracción de subconjuntos de observaciones</a></li>
<li><a href="5-2-transformacion-de-datos.html#extraccion-de-subconjuntos-de-variables-select"><span class="toc-section-number">5.2.3</span> Extracción de subconjuntos de variables (<em>select</em>)</a></li>
<li><a href="5-2-transformacion-de-datos.html#creacion-de-resumenes-de-datos"><span class="toc-section-number">5.2.4</span> Creación de resumenes de datos</a></li>
<li><a href="5-2-transformacion-de-datos.html#creacion-de-nuevas-variables"><span class="toc-section-number">5.2.5</span> Creación de nuevas variables</a></li>
<li><a href="5-2-transformacion-de-datos.html#combinacion-de-conjuntos-de-datos-joins"><span class="toc-section-number">5.2.6</span> Combinación de conjuntos de datos (<em>joins</em>)</a></li>
<li><a href="5-2-transformacion-de-datos.html#agrupar-datos"><span class="toc-section-number">5.2.7</span> Agrupar datos</a></li>
<li><a href="5-2-transformacion-de-datos.html#reorganizar-datos"><span class="toc-section-number">5.2.8</span> Reorganizar datos</a></li>
</ul></li>
<li class="has-sub"><a href="5-3-datos-limpios.html#datos-limpios"><span class="toc-section-number">5.3</span> Datos limpios</a><ul>
<li><a href="5-3-datos-limpios.html#datos-limpios-1"><span class="toc-section-number">5.3.1</span> Datos limpios</a></li>
<li><a href="5-3-datos-limpios.html#de-sucio-a-limpio"><span class="toc-section-number">5.3.2</span> De sucio a limpio</a></li>
</ul></li>
<li class="has-sub"><a href="5-4-visualizacion.html#visualizacion"><span class="toc-section-number">5.4</span> Visualización</a><ul>
<li><a href="5-4-visualizacion.html#la-gramatica-de-las-graficas"><span class="toc-section-number">5.4.1</span> La gramática de las gráficas</a></li>
<li><a href="5-4-visualizacion.html#que-es"><span class="toc-section-number">5.4.2</span> ¿Qué es?</a></li>
<li><a href="5-4-visualizacion.html#base-plotting-vs.ggplot"><span class="toc-section-number">5.4.3</span> Base plotting vs. ggplot</a></li>
<li><a href="5-4-visualizacion.html#ggplot"><span class="toc-section-number">5.4.4</span> ggplot</a></li>
<li><a href="5-4-visualizacion.html#caracteristicas-importantes"><span class="toc-section-number">5.4.5</span> Características importantes</a></li>
<li><a href="5-4-visualizacion.html#las-capas"><span class="toc-section-number">5.4.6</span> Las capas</a></li>
<li><a href="5-4-visualizacion.html#componentes-de-una-capa"><span class="toc-section-number">5.4.7</span> Componentes de una capa</a></li>
</ul></li>
<li><a href="5-5-material-adicional-3.html#material-adicional-3"><span class="toc-section-number">5.5</span> Material adicional</a></li>
</ul></li>
<li><a href="6-conclusion.html#conclusion"><span class="toc-section-number">6</span> Conclusión</a></li>
<li class="appendix"><span><b>Apéndices</b></span></li>
<li class="has-sub"><a href="A-markdown.html#markdown"><span class="toc-section-number">A</span> Markdown</a><ul>
<li><a href="A-1-r-markdown.html#r-markdown"><span class="toc-section-number">A.1</span> R Markdown</a></li>
</ul></li>
<li class="has-sub"><a href="B-packrat.html#packrat"><span class="toc-section-number">B</span> Packrat</a><ul>
<li><a href="B-1-el-directorio-del-proyecto.html#el-directorio-del-proyecto"><span class="toc-section-number">B.1</span> El directorio del proyecto</a></li>
<li><a href="B-2-instalacion-1.html#instalacion-1"><span class="toc-section-number">B.2</span> Instalación</a></li>
<li><a href="B-3-r-markdown-1.html#r-markdown-1"><span class="toc-section-number">B.3</span> R Markdown</a></li>
</ul></li>
<li><a href="C-formatos.html#formatos"><span class="toc-section-number">C</span> Formatos</a></li>
<li><a href="bibliografia.html#bibliografia">Bibliografía</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="transformacion-de-datos" class="section level2">
<h2><span class="header-section-number">5.2</span> Transformación de datos</h2>
<p>Esta sección resume algunas de las funciones existentes para <strong>transformar</strong> datos en <code>R</code>. En particular, se revisan las transformaciones más comunes que se realizan sobre datos. En esta sección, se revisan las acciones implementadas en el paquete <code>dplyr</code> <span class="citation">(Wickham and Francois, n.d.)</span>. En la figura <a href="5-2-transformacion-de-datos.html#fig:ciclo3">5.3</a> podemos ver la etapa del análisis de datos correspondiente.</p>
<div class="figure" style="text-align: center"><span id="fig:ciclo3"></span>
<img src="images/02_ciclo_3.png" alt="Transformación de datos [@grolemund2016r, Introducción]." width="75%" />
<p class="caption">
Figura 5.3: Transformación de datos <span class="citation">(Grolemund and Wickham <a href="#ref-grolemund2016r">2016</a>, Introducción)</span>.
</p>
</div>
<p>Existen muchas maneras de transformar los datos y una gran cantidad de paquetes que implementan distintas funciones útiles para realizar esta tarea. En particular, resaltamos <code>dplyr</code> y <code>data.table</code>. En esta sección se ejemplifican todas las funciones que permiten hacer trabajo con datos que están implementadas en <code>dplyr</code><a href="#fn10" class="footnoteRef" id="fnref10"><sup>10</sup></a> y en <code>tidyr</code> <span class="citation">(H. Wickham <a href="#ref-tidyr">2016</a><a href="#ref-tidyr">b</a>)</span>.</p>
<div id="tareas-comunes-en-la-manipulacion-de-datos" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Tareas comunes en la manipulación de datos</h3>
<p>Las funciones implementadas en este paquete están diseñadas para facilitar la transformación de datos. En general, la transformación de datos implica definir qué se hará con ellos, escribir un programa que realice esa tarea y ejecutarlo <span class="citation">(Wickham and Francois, n.d., viñeta de introducción)</span>.</p>
<p><code>dplyr</code> y <code>tidyr</code> simplifican estos pasos al proveer de opciones limitadas consideradas como las tareas más comunes en la transformación de datos. Además, proveen de verbos simples que corresponden a funciones en <code>R</code> y que mapean directamente a estas <em>tareas más comunes</em> (ver Cuadro <a href="5-2-transformacion-de-datos.html#tab:accionescomunes">5.1</a>).</p>
<table>
<caption>
<span id="tab:accionescomunes">Cuadro 5.1: </span>Acciones y verbos comunes en la manipulación de datos <span class="citation">(<span class="citeproc-not-found" data-reference-id="datawrangling"><strong>???</strong></span>)</span>.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Acción
</th>
<th style="text-align:left;">
Verbos
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Extracción de <strong>subconjuntos de observaciones</strong>.
</td>
<td style="text-align:left;">
&lt;span&gt;&amp;#8226;&lt;/span&gt; <code>filter</code>: seleccionamos filas de acuerdo a los valores de las variables&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>distinct</code>: elimina renglones duplicados&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>sample_frac</code>: selecciona aleatoriamente una fracción de filas&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>sample_n</code>: selecciona aleatoriamente <span class="math inline">\(n\)</span> filas&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>slice</code>: selecciona filas por posición&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>top_n</code>: selecciona y ordena según una variable <span class="math inline">\(n\)</span> entradas
</td>
</tr>
<tr>
<td style="text-align:left;">
Extracción de <strong>subconjuntos de variables</strong>.
</td>
<td style="text-align:left;">
&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>select</code>: seleccionamos un subconjunto de las columnas utilizando los nombres de las variables
</td>
</tr>
<tr>
<td style="text-align:left;">
Creación de <strong>resumenes de datos</strong>.
</td>
<td style="text-align:left;">
&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>summarise</code>: resume los datos en un valor único&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>summarise_each</code>: aplica una función de resumen a cada columna&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>count</code>: cuenta el número de filas con cada valor única de una variable
</td>
</tr>
<tr>
<td style="text-align:left;">
Creación de <strong>nuevas variables</strong>.
</td>
<td style="text-align:left;">
&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>mutate</code>: genera nuevas variables a partir de las variables originales&lt;br&gt; &lt;span&gt;&amp;#8226;&lt;/span&gt;<code>mutate_each</code>: aplica una función ventana a cada columna&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>transmute</code>: genera una o más nuevas columnas eliminando las columnas originales
</td>
</tr>
<tr>
<td style="text-align:left;">
<strong>Combinación</strong> de conjuntos de datos.
</td>
<td style="text-align:left;">
&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>left_join</code>: realiza un join conservando todas las observaciones de la primera tabla especificada&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>right_join</code>: realiza un join conservando todas las observaciones de la segunda tabla especificada&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>inner_join</code>: realiza un join conservando todas las observaciones que están en ambas tablas&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>full_join</code>: realiza un join conservando todas las observaciones y valores de ambas tablas&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>semi_join</code>: conserva todas las observaciones de la primera tabla que están en la segunda tabla&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>anti_join</code>: conserva todas las observaciones de la primera tabla que no están en la segunda tabla&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>intersect</code>: conserva observaciones que están tanto en la primera tabla como en la segunda&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>union</code>: conserva observaciones que están en cualesquier tabla&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>setdiff</code>: conserva observaciones de la primera tabla que no están en la segunda&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>bind_rows</code>: une las filas de la segunda tabla a las de la primera&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>bind_cols</code>: une las columnas de la segunda tabla a las de la primera
</td>
</tr>
<tr>
<td style="text-align:left;">
<strong>Agrupar</strong> datos.
</td>
<td style="text-align:left;">
&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>group_by</code>: agrupa los datos según una o más variables&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>ungroup</code>: elimina los grupos en un data frame
</td>
</tr>
<tr>
<td style="text-align:left;">
<strong>Reorganizar</strong> datos (<em>reshape data</em>).
</td>
<td style="text-align:left;">
&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>data_frame</code>: combina vectores en un dataframe&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>arrange</code>: Ordena las filas según una o más variables&lt;br&gt;&lt;span&gt;&amp;#8226;&lt;/span&gt;<code>rename</code>: renombra columnas de un dataframe
</td>
</tr>
</tbody>
</table>
<p>Dentro de <code>tidyr</code> hay más verbos útiles para reorganizar datos que se verán en la sección  junto con los <em>criterios de datos limpios</em> que proporcionan un sustento para la conceptualización de la manipulación de datos eficiente en <code>R</code>.</p>
<p>Todos estos verbos funcionan de la misma manera (tienen la misma estructura):</p>
<ul>
<li>El primer argumento de la función es un <em>data.frame</em></li>
<li>Los argumentos subsecuentes indican qué es lo que se debe hacer a ese <em>data.frame</em></li>
<li>Siempre regresa un <em>data.frame</em></li>
</ul>
<p>A continuación, se ejemplifica el uso de los distintos verbos de la tabla <a href="5-2-transformacion-de-datos.html#tab:accionescomunes">5.2</a>. Para esto, utilizaremos los siguientes conjuntos de datos de muestra, todos disponibles en el paquete <code>nycflights13</code> <span class="citation">(H. Wickham <a href="#ref-flights">2016</a><a href="#ref-flights">a</a>)</span>. Se leerán desde archivo de texto plano para ejemplificar algunos elementos de la limpieza.</p>
<p>Nota como utilizamos la función del paquete <code>readr</code> <code>read_csv</code>. Esta es una nueva implementación de <code>read.csv</code> pero mucho mas rápida.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/flights.csv&quot;</span>)
flights</code></pre></div>
<pre><code>## # A tibble: 227,496 x 14
##    date                 hour minute   dep   arr dep_delay arr_delay carrier
##    &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
##  1 2011-01-01 12:00:00    14      0  1400  1500         0       -10 AA     
##  2 2011-01-02 12:00:00    14      1  1401  1501         1        -9 AA     
##  3 2011-01-03 12:00:00    13     52  1352  1502        -8        -8 AA     
##  4 2011-01-04 12:00:00    14      3  1403  1513         3         3 AA     
##  5 2011-01-05 12:00:00    14      5  1405  1507         5        -3 AA     
##  6 2011-01-06 12:00:00    13     59  1359  1503        -1        -7 AA     
##  7 2011-01-07 12:00:00    13     59  1359  1509        -1        -1 AA     
##  8 2011-01-08 12:00:00    13     55  1355  1454        -5       -16 AA     
##  9 2011-01-09 12:00:00    14     43  1443  1554        43        44 AA     
## 10 2011-01-10 12:00:00    14     43  1443  1553        43        43 AA     
## # ... with 227,486 more rows, and 6 more variables: flight &lt;int&gt;,
## #   dest &lt;chr&gt;, plane &lt;chr&gt;, cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">planes &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/planes.csv&quot;</span>)
planes</code></pre></div>
<pre><code>## # A tibble: 2,853 x 9
##    plane   year mfr       model   no.eng no.seats speed engine  type      
##    &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;int&gt;    &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;     
##  1 N576AA  1991 MCDONNEL… DC-9-8…      2      172    NA Turbo-… Fixed win…
##  2 N557AA  1993 MARZ BAR… KITFOX…      1        2    NA Recipr… Fixed win…
##  3 N403AA  1974 RAVEN     S55A        NA        1    60 None    Balloon   
##  4 N492AA  1989 MCDONNEL… DC-9-8…      2      172    NA Turbo-… Fixed win…
##  5 N262AA  1985 MCDONNEL… DC-9-8…      2      172    NA Turbo-… Fixed win…
##  6 N493AA  1989 MCDONNEL… DC-9-8…      2      172    NA Turbo-… Fixed win…
##  7 N477AA  1988 MCDONNEL… DC-9-8…      2      172    NA Turbo-… Fixed win…
##  8 N476AA  1988 MCDONNEL… DC-9-8…      2      172    NA Turbo-… Fixed win…
##  9 N504AA    NA AUTHIER … TIERRA…      1        2    NA Recipr… Fixed win…
## 10 N565AA  1987 MCDONNEL… DC-9-8…      2      172    NA Turbo-… Fixed win…
## # ... with 2,843 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">airports &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/airports.csv&quot;</span>)
airports</code></pre></div>
<pre><code>## # A tibble: 3,376 x 7
##    iata  airport              city             state country   lat   long
##    &lt;chr&gt; &lt;chr&gt;                &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;
##  1 00M   Thigpen              Bay Springs      MS    USA      32.0  -89.2
##  2 00R   Livingston Municipal Livingston       TX    USA      30.7  -95.0
##  3 00V   Meadow Lake          Colorado Springs CO    USA      38.9 -105. 
##  4 01G   Perry-Warsaw         Perry            NY    USA      42.7  -78.1
##  5 01J   Hilliard Airpark     Hilliard         FL    USA      30.7  -81.9
##  6 01M   Tishomingo County    Belmont          MS    USA      34.5  -88.2
##  7 02A   Gragg-Wade           Clanton          AL    USA      32.9  -86.6
##  8 02C   Capitol              Brookfield       WI    USA      43.1  -88.2
##  9 02G   Columbiana County    East Liverpool   OH    USA      40.7  -80.6
## 10 03D   Memphis Memorial     Memphis          MO    USA      40.4  -92.2
## # ... with 3,366 more rows</code></pre>
</div>
<div id="extraccion-de-subconjuntos-de-observaciones" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Extracción de subconjuntos de observaciones</h3>
<div id="filter" class="section level4">
<h4><span class="header-section-number">5.2.2.1</span> filter</h4>
<p>Ya habíamos visto muchas maneras de extraer datos específicos de una base de datos de acuerdo a condiciones lógicas impuestas en los valores de las filas de columnas especificas. <code>filter</code> nos permite poner tantas condiciones como queramos de manera muy fácil y entendible por cualquiera que lea nuestro código.</p>
<p>Busquemos, por ejemplo, todos los vuelos hacia SFO u OAK</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(flights, dest <span class="op">==</span><span class="st"> &quot;SFO&quot;</span> <span class="op">|</span><span class="st"> </span>dest <span class="op">==</span><span class="st"> &quot;OAK&quot;</span>)</code></pre></div>
<pre><code>## # A tibble: 3,508 x 14
##    date                 hour minute   dep   arr dep_delay arr_delay carrier
##    &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
##  1 2011-01-31 12:00:00     8     51   851  1052         1       -27 CO     
##  2 2011-01-31 12:00:00    11     29  1129  1351         4         1 CO     
##  3 2011-01-31 12:00:00    14     32  1432  1656         7         5 CO     
##  4 2011-01-31 12:00:00    17     48  1748  2001         3        -4 CO     
##  5 2011-01-31 12:00:00    21     43  2143  2338        50        24 CO     
##  6 2011-01-31 12:00:00     7     29   729  1002        -1         2 CO     
##  7 2011-01-31 12:00:00    15     58  1558  1812        -2        -8 CO     
##  8 2011-01-30 12:00:00     9     35   935  1203        45        49 CO     
##  9 2011-01-30 12:00:00    11     43  1143  1359        18        14 CO     
## 10 2011-01-30 12:00:00    14     59  1459  1715        34        24 CO     
## # ... with 3,498 more rows, and 6 more variables: flight &lt;int&gt;,
## #   dest &lt;chr&gt;, plane &lt;chr&gt;, cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;</code></pre>
<p>Los vuelos con retraso mayor a 5 horas</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(flights, arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>)</code></pre></div>
<pre><code>## # A tibble: 77,848 x 14
##    date                 hour minute   dep   arr dep_delay arr_delay carrier
##    &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
##  1 2011-01-09 12:00:00    14     43  1443  1554        43        44 AA     
##  2 2011-01-10 12:00:00    14     43  1443  1553        43        43 AA     
##  3 2011-01-11 12:00:00    14     29  1429  1539        29        29 AA     
##  4 2011-01-17 12:00:00    15     30  1530  1634        90        84 AA     
##  5 2011-01-20 12:00:00    15      7  1507  1622        67        72 AA     
##  6 2011-01-31 12:00:00    14     41  1441  1553        41        43 AA     
##  7 2011-01-13 12:00:00     7     22   722   841         2         6 AA     
##  8 2011-01-16 12:00:00     7     43   743   843        23         8 AA     
##  9 2011-01-17 12:00:00     7     24   724   842         4         7 AA     
## 10 2011-01-24 12:00:00     7     31   731   904        11        29 AA     
## # ... with 77,838 more rows, and 6 more variables: flight &lt;int&gt;,
## #   dest &lt;chr&gt;, plane &lt;chr&gt;, cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;</code></pre>
<p>Podemos juntar las preguntas: vuelos con retraso mayor a 5 horas con destino a SFO o OAK</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(flights, dest <span class="op">==</span><span class="st"> &quot;SFO&quot;</span> <span class="op">|</span><span class="st"> </span>dest <span class="op">==</span><span class="st"> &quot;OAK&quot;</span>, arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>)</code></pre></div>
<pre><code>## # A tibble: 1,581 x 14
##    date                 hour minute   dep   arr dep_delay arr_delay carrier
##    &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
##  1 2011-01-31 12:00:00    21     43  2143  2338        50        24 CO     
##  2 2011-01-30 12:00:00     9     35   935  1203        45        49 CO     
##  3 2011-01-30 12:00:00    11     43  1143  1359        18        14 CO     
##  4 2011-01-30 12:00:00    14     59  1459  1715        34        24 CO     
##  5 2011-01-30 12:00:00    17     49  1749  2011         4         6 CO     
##  6 2011-01-30 12:00:00    19     31  1931  2159        41        41 CO     
##  7 2011-01-30 12:00:00    21      0  2100  2320        10         9 CO     
##  8 2011-01-29 12:00:00     8     52   852  1126         2        12 CO     
##  9 2011-01-29 12:00:00    14     42  1442  1655        17         9 CO     
## 10 2011-01-29 12:00:00    18      9  1809  2021        14        11 CO     
## # ... with 1,571 more rows, and 6 more variables: flight &lt;int&gt;,
## #   dest &lt;chr&gt;, plane &lt;chr&gt;, cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;</code></pre>
</div>
<div id="distinct" class="section level4">
<h4><span class="header-section-number">5.2.2.2</span> distinct</h4>
<p>Para eliminar duplicados, usamos la función <code>distinct</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights.dup &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(flights, flights)
<span class="kw">dim</span>(flights.dup)</code></pre></div>
<pre><code>## [1] 454992     14</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(<span class="kw">distinct</span>(flights.dup))</code></pre></div>
<pre><code>## [1] 227496     14</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(flights.dup)</code></pre></div>
</div>
<div id="sample_n-sample_frac-slice" class="section level4">
<h4><span class="header-section-number">5.2.2.3</span> sample_n, sample_frac, slice</h4>
<p>En ocasiones necesitamos extraer subconjuntos aleatorios de los datos, para ello podemos especificar el número de renglones que necesitamos (usando <code>sample_n</code>), el porcentaje de datos que deseamos (usando <code>sample_frac</code>) o las posiciones específicas de los datos que queremos (usando <code>slice</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">1099</span>) 
<span class="co"># extraemos 10 datos en forma aleatoria</span>
<span class="kw">sample_n</span>(flights, <span class="dt">size =</span> <span class="dv">10</span>)</code></pre></div>
<pre><code>## # A tibble: 10 x 14
##    date                 hour minute   dep   arr dep_delay arr_delay carrier
##    &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
##  1 2011-05-29 12:00:00    12      3  1203  1304        -2       -16 AA     
##  2 2011-05-30 12:00:00    13     43  1343  1432        -2        -8 WN     
##  3 2011-07-20 12:00:00    18     21  1821  1956        10        20 CO     
##  4 2011-07-10 12:00:00    13      5  1305  1355         5         0 WN     
##  5 2011-06-17 12:00:00    11     30  1130  1228         5         3 WN     
##  6 2011-12-03 12:00:00     7     59   759   851        -1        -9 WN     
##  7 2011-06-12 12:00:00     9     19   919  1015         4         4 CO     
##  8 2011-09-24 12:00:00     7     55   755  1124        -5        -5 XE     
##  9 2011-04-19 12:00:00    17     48  1748     6        18        NA UA     
## 10 2011-10-10 12:00:00    10     26  1026  1406         1        -1 CO     
## # ... with 6 more variables: flight &lt;int&gt;, dest &lt;chr&gt;, plane &lt;chr&gt;,
## #   cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Extraemos el 1% de los datos de flights</span>
<span class="kw">sample_frac</span>(flights, <span class="dt">size =</span> <span class="fl">0.01</span>)</code></pre></div>
<pre><code>## # A tibble: 2,275 x 14
##    date                 hour minute   dep   arr dep_delay arr_delay carrier
##    &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
##  1 2011-03-21 12:00:00    13     21  1321  1635         6         0 CO     
##  2 2011-06-17 12:00:00    21      2  2102  2151         2        11 CO     
##  3 2011-07-12 12:00:00    10     17  1017  1448         2         1 CO     
##  4 2011-08-08 12:00:00    10     55  1055  1422         0        -3 WN     
##  5 2011-09-13 12:00:00    19      1  1901  2314        -4        -5 CO     
##  6 2011-03-06 12:00:00    18     32  1832  2044        -3       -11 CO     
##  7 2011-05-09 12:00:00     6     53   653   843        18       -15 OO     
##  8 2011-10-06 12:00:00    15     33  1533  1628         3        -7 WN     
##  9 2011-06-17 12:00:00    13     50  1350  1545         0         2 OO     
## 10 2011-11-01 12:00:00    14     30  1430  1601         5         1 CO     
## # ... with 2,265 more rows, and 6 more variables: flight &lt;int&gt;,
## #   dest &lt;chr&gt;, plane &lt;chr&gt;, cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># extraemos las posiciones 100 a 110</span>
<span class="kw">slice</span>(flights, <span class="dv">100</span><span class="op">:</span><span class="dv">110</span>)</code></pre></div>
<pre><code>## # A tibble: 11 x 14
##    date                 hour minute   dep   arr dep_delay arr_delay carrier
##    &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
##  1 2011-01-12 12:00:00    16     31  1631  1739         1        -6 AA     
##  2 2011-01-13 12:00:00    16     30  1630  1733         0       -12 AA     
##  3 2011-01-14 12:00:00    16     29  1629  1734        -1       -11 AA     
##  4 2011-01-15 12:00:00    16     32  1632  1736         2        -9 AA     
##  5 2011-01-16 12:00:00    17      8  1708  1819        38        34 AA     
##  6 2011-01-17 12:00:00    16     32  1632  1744         2        -1 AA     
##  7 2011-01-18 12:00:00    16     25  1625  1740        -5        -5 AA     
##  8 2011-01-19 12:00:00    16     29  1629  1731        -1       -14 AA     
##  9 2011-01-20 12:00:00    16     41  1641  1752        11         7 AA     
## 10 2011-01-21 12:00:00    16     38  1638  1746         8         1 AA     
## 11 2011-01-22 12:00:00    16     23  1623  1742        -7        -3 AA     
## # ... with 6 more variables: flight &lt;int&gt;, dest &lt;chr&gt;, plane &lt;chr&gt;,
## #   cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;</code></pre>
</div>
<div id="top_n" class="section level4">
<h4><span class="header-section-number">5.2.2.4</span> top_n</h4>
<p>Podemos obtener los 5 vuelos con mayor retraso de salida:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">top_n</span>(flights, <span class="dv">5</span>, dep_delay)</code></pre></div>
<pre><code>## # A tibble: 5 x 14
##   date                 hour minute   dep   arr dep_delay arr_delay carrier
##   &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
## 1 2011-06-21 12:00:00    23     34  2334   124       869       861 UA     
## 2 2011-06-09 12:00:00    20     29  2029  2243       814       793 MQ     
## 3 2011-08-01 12:00:00     1     56   156   452       981       957 CO     
## 4 2011-11-08 12:00:00     7     21   721   948       931       918 MQ     
## 5 2011-12-12 12:00:00     6     50   650   808       970       978 AA     
## # ... with 6 more variables: flight &lt;int&gt;, dest &lt;chr&gt;, plane &lt;chr&gt;,
## #   cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;</code></pre>
<p>O con el menor retraso de salida:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">top_n</span>(flights, <span class="dv">5</span>, <span class="kw">desc</span>(dep_delay))</code></pre></div>
<pre><code>## # A tibble: 6 x 14
##   date                 hour minute   dep   arr dep_delay arr_delay carrier
##   &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
## 1 2011-01-18 12:00:00    15     42  1542  1936       -18       -17 CO     
## 2 2011-02-14 12:00:00    19     17  1917  2027       -23       -23 MQ     
## 3 2011-04-10 12:00:00    21      1  2101  2206       -19       -12 XE     
## 4 2011-08-03 12:00:00    17     41  1741  1810       -19       -40 XE     
## 5 2011-10-04 12:00:00    14     38  1438  1813       -18       -31 EV     
## 6 2011-12-24 12:00:00    11     12  1112  1314       -33       -25 OO     
## # ... with 6 more variables: flight &lt;int&gt;, dest &lt;chr&gt;, plane &lt;chr&gt;,
## #   cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;</code></pre>
</div>
</div>
<div id="extraccion-de-subconjuntos-de-variables-select" class="section level3">
<h3><span class="header-section-number">5.2.3</span> Extracción de subconjuntos de variables (<em>select</em>)</h3>
<p>Podemos ahora, mas fácilmente, quedarnos con únicamente ciertas variables. <code>select</code> esta implementado de tal manera que funciona <em>nombrando</em> las variables que se quieren utilizar.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(flights, flight, dest)</code></pre></div>
<pre><code>## # A tibble: 227,496 x 2
##    flight dest 
##     &lt;int&gt; &lt;chr&gt;
##  1    428 DFW  
##  2    428 DFW  
##  3    428 DFW  
##  4    428 DFW  
##  5    428 DFW  
##  6    428 DFW  
##  7    428 DFW  
##  8    428 DFW  
##  9    428 DFW  
## 10    428 DFW  
## # ... with 227,486 more rows</code></pre>
<p>También podemos especificar que queremos todas las variables <em>menos</em> algunas.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(flights, <span class="op">-</span>date, <span class="op">-</span>hour, <span class="op">-</span>minute, <span class="op">-</span>dep, <span class="op">-</span>arr, <span class="op">-</span>carrier, <span class="op">-</span>flight)</code></pre></div>
<pre><code>## # A tibble: 227,496 x 7
##    dep_delay arr_delay dest  plane  cancelled  time  dist
##        &lt;int&gt;     &lt;int&gt; &lt;chr&gt; &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1         0       -10 DFW   N576AA         0    40   224
##  2         1        -9 DFW   N557AA         0    45   224
##  3        -8        -8 DFW   N541AA         0    48   224
##  4         3         3 DFW   N403AA         0    39   224
##  5         5        -3 DFW   N492AA         0    44   224
##  6        -1        -7 DFW   N262AA         0    45   224
##  7        -1        -1 DFW   N493AA         0    43   224
##  8        -5       -16 DFW   N477AA         0    40   224
##  9        43        44 DFW   N476AA         0    41   224
## 10        43        43 DFW   N504AA         0    45   224
## # ... with 227,486 more rows</code></pre>
<p>Podemos pedir las variables que empiezan con algún caracter.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(flights, <span class="kw">starts_with</span>(<span class="st">&quot;d&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 227,496 x 5
##    date                  dep dep_delay dest   dist
##    &lt;dttm&gt;              &lt;int&gt;     &lt;int&gt; &lt;chr&gt; &lt;int&gt;
##  1 2011-01-01 12:00:00  1400         0 DFW     224
##  2 2011-01-02 12:00:00  1401         1 DFW     224
##  3 2011-01-03 12:00:00  1352        -8 DFW     224
##  4 2011-01-04 12:00:00  1403         3 DFW     224
##  5 2011-01-05 12:00:00  1405         5 DFW     224
##  6 2011-01-06 12:00:00  1359        -1 DFW     224
##  7 2011-01-07 12:00:00  1359        -1 DFW     224
##  8 2011-01-08 12:00:00  1355        -5 DFW     224
##  9 2011-01-09 12:00:00  1443        43 DFW     224
## 10 2011-01-10 12:00:00  1443        43 DFW     224
## # ... with 227,486 more rows</code></pre>
<p>O las que contienen algún patrón</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(flights, <span class="kw">contains</span>(<span class="st">&quot;dep&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 227,496 x 2
##      dep dep_delay
##    &lt;int&gt;     &lt;int&gt;
##  1  1400         0
##  2  1401         1
##  3  1352        -8
##  4  1403         3
##  5  1405         5
##  6  1359        -1
##  7  1359        -1
##  8  1355        -5
##  9  1443        43
## 10  1443        43
## # ... with 227,486 more rows</code></pre>
<div class="ejercicio">
<p>
<strong>Ejercicios</strong>
</p>
<ol style="list-style-type: decimal">
<li>
Revisa la ayuda de select con <code>?select</code>.
</li>
<li>
Juega con la función <code>starts_with()</code>. ¿Qué variables empiezan con “de”?
</li>
<li>
Juega con la función <code>ends_with()</code>. ¿Qué variables terminan con “delay”?
</li>
<li>
Utiliza la base de datos <code>iris</code> como en el ejemplo de la ayuda.
</li>
<li>
¿Qué hace la función <code>contains()</code>?
</li>
<li>
¿Cómo es diferente de <code>matches()</code>?
</li>
<li>
¿Cómo obtienes todas las variables <em>menos</em> Petal.Width?
</li>
</ol>
</div>
</div>
<div id="creacion-de-resumenes-de-datos" class="section level3">
<h3><span class="header-section-number">5.2.4</span> Creación de resumenes de datos</h3>
<p>Las funciones <code>summarise</code>, <code>summarise_each</code> y <code>count</code> permiten realizar resumenes para ciertas variables existentes o nuevas en los datos.</p>
<div id="summarise" class="section level4">
<h4><span class="header-section-number">5.2.4.1</span> summarise</h4>
<p>Ahora, si queremos saber el promedio de velocidad de los vuelos podemos calcularlo fácilmente con <code>summarise</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights<span class="op">$</span>velocidad &lt;-<span class="st"> </span>flights<span class="op">$</span>dist<span class="op">/</span>flights<span class="op">$</span>time

<span class="kw">summarise</span>(flights, <span class="dt">vel_prom =</span> <span class="kw">mean</span>(velocidad, <span class="dt">na.rm =</span> T))</code></pre></div>
<pre><code>##   vel_prom
## 1 7.017055</code></pre>
<div class="curiosidad">
<p>
<strong>Funciones resumen</strong>
</p>
<p>
Pueden utilizarse junto con summarise cualesquiera función en <code>R</code> (por ejemplo: min, max, mean, median, var, sd) que realice agregaciones de vectores. Sin embargo, el paquete <code>dplyr</code> implementa varias funciones útiles adicionales como <span class="citation"><span class="citation">(<span class="citeproc-not-found" data-reference-id="datawrangling"><strong>???</strong></span>)</span></span>:
</p>
<ul>
<li>
<code>first</code>: extrae el primer valor de un vector
</li>
<li>
<code>last</code>: extrae el último valor de un vector
</li>
<li>
<code>n</code>: cuenta el número de valores en un vector
</li>
<li>
<code>n_distinct</code> cuenta el número de valores único en un vector
</li>
</ul>
</div>
</div>
<div id="summarise_each" class="section level4">
<h4><span class="header-section-number">5.2.4.2</span> summarise_each</h4>
<p>Podemos especificar una función a aplicar a variables específicas en un dataframe. Por ejemplo, extraer la media para las variables: date, dep_delay, arr_delay, time y dist.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summarise_each</span>(flights, <span class="kw">funs</span>(mean), date, dep_delay, arr_delay, time, dist)</code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   date                dep_delay arr_delay  time  dist
##   &lt;dttm&gt;                  &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 2011-07-02 03:05:12        NA        NA    NA  788.</code></pre>
<p>Debido a que existen valores perdidos en variables como retraso de salida (<em>dep_delay</em>) y retrasos de llegada (<em>arr_delay</em>), debemos especificar la opción para no utilizar los NAs en la función.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summarise_each</span>(flights, <span class="kw">funs</span>(<span class="kw">mean</span>(., <span class="dt">na.rm =</span> T)), date, dep_delay
               , arr_delay, time, dist)</code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   date                dep_delay arr_delay  time  dist
##   &lt;dttm&gt;                  &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 2011-07-02 03:05:12      9.44      7.09  108.  788.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># opcion 2</span>
mean_na &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  <span class="kw">mean</span>(x, <span class="dt">na.rm =</span> T)
}
<span class="kw">summarise_each</span>(flights, <span class="kw">funs</span>(mean_na), date, dep_delay, arr_delay, time, dist)</code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   date                dep_delay arr_delay  time  dist
##   &lt;dttm&gt;                  &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 2011-07-02 03:05:12      9.44      7.09  108.  788.</code></pre>
</div>
<div id="count" class="section level4">
<h4><span class="header-section-number">5.2.4.3</span> count</h4>
<p>Podemos contar los valores únicos en variables categóricas, por ejemplo, contar el número de vuelos por aerolínea:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dplyr<span class="op">::</span><span class="kw">count</span>(flights, carrier, <span class="dt">sort =</span> T)</code></pre></div>
<pre><code>## # A tibble: 15 x 2
##    carrier     n
##    &lt;chr&gt;   &lt;int&gt;
##  1 XE      73053
##  2 CO      70032
##  3 WN      45343
##  4 OO      16061
##  5 MQ       4648
##  6 US       4082
##  7 AA       3244
##  8 DL       2641
##  9 EV       2204
## 10 FL       2139
## 11 UA       2072
## 12 F9        838
## 13 B6        695
## 14 AS        365
## 15 YV         79</code></pre>
</div>
</div>
<div id="creacion-de-nuevas-variables" class="section level3">
<h3><span class="header-section-number">5.2.5</span> Creación de nuevas variables</h3>
<div id="mutate-y-transmute" class="section level4">
<h4><span class="header-section-number">5.2.5.1</span> mutate y transmute</h4>
<p>Muchas veces lo que se desea es generar nuevas variables utilizando funciones sobre las variables de la tabla.</p>
<p>Por ejemplo, queremos saber cual fue el vuelo mas rápido. Para esto queremos calcular la velocidad promedio del vuelo.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(<span class="kw">arrange</span>(<span class="kw">mutate</span>(flights, <span class="dt">velocidad =</span> dist<span class="op">/</span>time), <span class="kw">desc</span>(velocidad)),
       flight, dest, velocidad)</code></pre></div>
<pre><code>## # A tibble: 227,496 x 3
##    flight dest  velocidad
##     &lt;int&gt; &lt;chr&gt;     &lt;dbl&gt;
##  1   1646 AUS        12.7
##  2   5229 MEM        11.2
##  3    944 CLT        10.7
##  4   4634 HOB        10.7
##  5    500 IND        10.3
##  6    106 EWR        10.1
##  7    644 CLE        10.1
##  8   1074 CLE        10.1
##  9   1054 EWR        10.1
## 10   1424 DCA        10.1
## # ... with 227,486 more rows</code></pre>
<p>Esta manera de transformar a los datos (utilizando varios de los verbos) es confusa y difícil de leer. Es más sencillo utilizar el operador pipe<a href="#fn11" class="footnoteRef" id="fnref11"><sup>11</sup></a> de <code>R</code> implementado en el paquete <code>magrittr</code>, es decir, <code>%&gt;%</code> <span class="citation">(Bache and Wickham <a href="#ref-magrittr">2014</a>)</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights2 &lt;-<span class="st"> </span><span class="kw">mutate</span>(flights, <span class="dt">velocidad =</span> dist<span class="op">/</span>time) <span class="op">%&gt;%</span>
<span class="st">              </span><span class="kw">arrange</span>(., <span class="kw">desc</span>(velocidad)) <span class="op">%&gt;%</span>
<span class="st">              </span><span class="kw">select</span>(., flight, dest, velocidad)
flights2</code></pre></div>
<pre><code>## # A tibble: 227,496 x 3
##    flight dest  velocidad
##     &lt;int&gt; &lt;chr&gt;     &lt;dbl&gt;
##  1   1646 AUS        12.7
##  2   5229 MEM        11.2
##  3    944 CLT        10.7
##  4   4634 HOB        10.7
##  5    500 IND        10.3
##  6    106 EWR        10.1
##  7    644 CLE        10.1
##  8   1074 CLE        10.1
##  9   1054 EWR        10.1
## 10   1424 DCA        10.1
## # ... with 227,486 more rows</code></pre>
<p>La lectura es mucho mas sencilla de esta forma pues se lee de manera secuencial las transformaciones que se están realizando a los datos:</p>
<ol style="list-style-type: decimal">
<li>Agrego la columna de velocidad a la base de datos de <code>flights</code>, luego (operador pipe)</li>
<li>Ordeno los vuelos en forma descendiente según su velocidad, luego</li>
<li>Selecciono las variables de vuelo, destino y velocidad.</li>
</ol>
<p>Que el código sea entendible no es importante únicamente en el contexto del trabajo colaborativo pues muchas veces los lectores de su código serán ustedes en el futuro.</p>
<p><code>transmute</code> es muy similar a <code>mutate</code> pero elimina las variables que no fueron creadas por la función.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dplyr<span class="op">::</span><span class="kw">transmute</span>(flights, <span class="dt">velocidad =</span> dist<span class="op">/</span>time) <span class="op">%&gt;%</span>
<span class="st">              </span><span class="kw">arrange</span>(., <span class="kw">desc</span>(velocidad)) </code></pre></div>
<pre><code>## # A tibble: 227,496 x 1
##    velocidad
##        &lt;dbl&gt;
##  1      12.7
##  2      11.2
##  3      10.7
##  4      10.7
##  5      10.3
##  6      10.1
##  7      10.1
##  8      10.1
##  9      10.1
## 10      10.1
## # ... with 227,486 more rows</code></pre>
<div class="ejercicio">
<p>
<strong>Ejercicios</strong>
</p>
<ol style="list-style-type: decimal">
<li>
¿Cuáles son los 10 aviones-aerolíneas mas lentos? Utiliza el operador pipe, mutate, arrange y head.
</li>
<li>
Utiliza la función <code>str_sub</code> dentro de <code>stringr</code> para extraer únicamente el día del campo <code>date</code>.
</li>
<li>
Utiliza la función <code>ymd</code> del paquete <code>lubridate</code> para declarar date como una fecha (¡otra clase!).
</li>
<li>
Utiliza las funciones <code>paste0</code> del <code>base</code> y <code>ymd_hm</code> de <code>lubridate</code> para declarar date como un <code>datetime</code>.
</li>
</ol>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Respuestas</span>

<span class="co">#1</span>
<span class="kw">mutate</span>(flights, <span class="dt">velocidad =</span> dist<span class="op">/</span>time) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">arrange</span>(velocidad) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">select</span>(plane, carrier, velocidad)

<span class="co"># Más lindo, usando group_by y top_n: más específicamente el más </span>
<span class="co"># lento por carrier</span>
<span class="kw">mutate</span>(flights, <span class="dt">velocidad =</span> dist<span class="op">/</span>time) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">arrange</span>(velocidad) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">top_n</span>(<span class="dv">1</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">select</span>(plane, carrier, velocidad)

<span class="co">#2</span>
<span class="kw">mutate</span>(flights, <span class="dt">dia =</span> stringr<span class="op">::</span><span class="kw">str_sub</span>(date, <span class="dv">9</span>, <span class="dv">10</span>)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">select</span>(date, dia)
<span class="kw">head</span>(flights)

<span class="co"># 3</span>
<span class="kw">mutate</span>(flights,
       <span class="dt">fecha =</span> stringr<span class="op">::</span><span class="kw">str_sub</span>(date, <span class="dv">1</span>, <span class="dv">10</span>)
       , <span class="dt">fecha =</span> lubridate<span class="op">::</span><span class="kw">ymd</span>(fecha)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">select</span>(date, fecha)

<span class="co"># 4</span>
<span class="kw">mutate</span>(flights,
       <span class="dt">fecha =</span> lubridate<span class="op">::</span><span class="kw">ymd_hms</span>(date)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">select</span>(date, fecha)</code></pre></div>
<div class="curiosidad">
<p>
<strong>Funciones ventana <em>window functions</em> </strong>
</p>
<p>
Dentro de mutate, se pueden utilizar otras funciones que realicen transformaciones sobre vectores que regresen un vector del mismo tamaño, así como funciones propias.
</p>
<p>
Ahora bien, <code>dplyr</code> implementa otras funciones ventana como <span class="citation"><span class="citation">(<span class="citeproc-not-found" data-reference-id="datawrangling"><strong>???</strong></span>)</span></span>:
</p>
<ul>
<li>
<code>lead</code>: regresa todos los valores del vector movidos por una posición posterior
</li>
<li>
<code>lag</code>: regresa todos los valores del vector movidos por una posición anterior
</li>
<li>
<code>dense_rank</code>: rango sin huecos
</li>
<li>
<code>min_rank</code>: rango especificando el criterio de mínimo para empates
</li>
<li>
<code>percent_rank</code>: rango reescalado para estar entre 0 y 1
</li>
<li>
<code>row_number</code>: número de fila
</li>
<li>
<code>ntile</code>: creación de <span class="math inline"><span class="math inline">\(n\)</span></span> percentiles
</li>
<li>
<code>between</code>: verifica si el valor está entre dos valores
</li>
<li>
<code>cume_dist</code>: distribución acumulada
</li>
<li>
<code>cumall</code>: para vectores lógicos, intersección de los valores al renglón i-ésimo
</li>
<li>
<code>cumany</code>: para vectores lógicos, unión de los valores al renglón i-ésimo
</li>
<li>
<code>cummean</code>: acumula la media
</li>
</ul>
<p>
Para mayor detalle, puede revisarse la viñeta “window-functions” en el paquete dplyr <span class="citation"><span class="citation">(Wickham and Francois, n.d.)</span></span> con el comando <code>vignette(“window-functions”, package <span class="math inline">\(=\)</span> “dplyr”)</code>
</p>
</div>
</div>
<div id="mutate_each" class="section level4">
<h4><span class="header-section-number">5.2.5.2</span> mutate_each</h4>
<p>Igual que con <code>summarise_each</code>, <code>mutate_each</code> permite especificar una transformación vía una función ventana para variables específicas. Por ejemplo, extraemos los deciles correspondientes para las variables tiempo (<em>time</em>) y distancia (<em>dist</em>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights.m &lt;-<span class="st"> </span><span class="kw">mutate_each</span>(flights, <span class="kw">funs</span>(<span class="kw">ntile</span>(., <span class="dv">10</span>)), time, dist)
<span class="kw">table</span>(flights.m<span class="op">$</span>time)</code></pre></div>
<pre><code>## 
##     1     2     3     4     5     6     7     8     9    10 
## 22388 22387 22388 22387 22387 22388 22387 22388 22387 22387</code></pre>
</div>
</div>
<div id="combinacion-de-conjuntos-de-datos-joins" class="section level3">
<h3><span class="header-section-number">5.2.6</span> Combinación de conjuntos de datos (<em>joins</em>)</h3>
<p>Muchas veces la información se tiene repartida entre diferentes tablas pero es necesario juntar las variables de las diferentes observaciones en una sola tabla para modelarlas o describirlas. Es muy estándar, en el lenguaje SQL, el tipo de joins que se pueden utilizar. La figura <a href="5-2-transformacion-de-datos.html#fig:joins">5.4</a> muestra un resumen del tipo de joins que pueden realizarse.</p>
<div class="figure" style="text-align: center"><span id="fig:joins"></span>
<img src="images/02_joins.png" alt="Joins en el lenguaje SQL [@joins]." width="75%" />
<p class="caption">
Figura 5.4: Joins en el lenguaje SQL <span class="citation">(Moffat <a href="#ref-joins">2009</a>)</span>.
</p>
</div>
<p>El paquete <code>dplyr</code> implementa estos joins de manera natural, utilizando la lógica de SQL.</p>
<ul>
<li><code>inner_join</code>: regresa todas las filas de x en donde hay valores correspondientes para y, junto con todas las columnas.</li>
<li><code>left_join</code>: regresa todas las filas de x, rellenando con NA para valores que no encontró en y.</li>
<li><code>right_join</code>: regresa todas las filas de y, rellenando con NA para valores que no encontró en y.</li>
<li><code>full_join</code>: regresa todas las filas y todas las columnas para x y y. Donde no hay valores en alguno de los dos, rellena con NA.</li>
<li><code>semi_join</code>: regresa todas las filas de x para las que hay valores en y regresando únicamente las columnas de x.</li>
<li><code>anti_join</code>: regresa todas las filas de x donde no hay valores en y, manteniendo solo las columnas de x.</li>
</ul>
<p>Ahora, supongamos que queremos saber la velocidad promedio de los aviones que tenemos en nuestros datos para todos sus vuelos.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># base de aviones con velocidad</span>

vel_aviones &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(plane) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">summarise</span>(<span class="dt">vel_prom =</span> <span class="kw">mean</span>(dist<span class="op">/</span>time, <span class="dt">na.rm =</span> T))
  
<span class="kw">inner_join</span>(
  planes,
  vel_aviones
)  <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(plane, year, vel_prom) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(vel_prom))</code></pre></div>
<pre><code>## # A tibble: 2,853 x 3
##    plane   year vel_prom
##    &lt;chr&gt;  &lt;int&gt;    &lt;dbl&gt;
##  1 N653JB  2007     9.33
##  2 N709UW  1999     9.32
##  3 N3744F  2001     9.07
##  4 N3769L  2002     9.07
##  5 N623JB  2005     9.04
##  6 N607JB  2005     8.94
##  7 N580JB  2003     8.87
##  8 N658JB  2007     8.87
##  9 N589JB  2004     8.81
## 10 N760JB  2008     8.79
## # ... with 2,843 more rows</code></pre>
<p>Ahora, queremos saber los destinos con mayores retrasos.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">destinos &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">summarise</span>(<span class="dt">retraso =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm =</span> T))

<span class="kw">inner_join</span>(
  airports, 
  destinos,
  <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;iata&quot;</span> =<span class="st"> &quot;dest&quot;</span>)
) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(retraso))</code></pre></div>
<pre><code>## # A tibble: 114 x 8
##    iata  airport             city       state country   lat   long retraso
##    &lt;chr&gt; &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
##  1 ANC   Ted Stevens Anchor… Anchorage  AK    USA      61.2 -150.     26.1
##  2 CID   Eastern Iowa        Cedar Rap… IA    USA      41.9  -91.7    17.8
##  3 DSM   Des Moines Interna… Des Moines IA    USA      41.5  -93.7    16.0
##  4 SFO   San Francisco Inte… San Franc… CA    USA      37.6 -122.     14.9
##  5 BPT   Southeast Texas Re… Beaumont/… TX    USA      30.0  -94.0    14.3
##  6 GRR   Kent County Intern… Grand Rap… MI    USA      42.9  -85.5    13.7
##  7 DAY   James M Cox Dayton… Dayton     OH    USA      39.9  -84.2    13.7
##  8 VPS   Eglin Air Force Ba… Valparaiso FL    USA      30.5  -86.5    12.5
##  9 SAV   Savannah Internati… Savannah   GA    USA      32.1  -81.2    12.3
## 10 RIC   Richmond Internati… Richmond   VA    USA      37.5  -77.3    12.3
## # ... with 104 more rows</code></pre>
</div>
<div id="agrupar-datos" class="section level3">
<h3><span class="header-section-number">5.2.7</span> Agrupar datos</h3>
<div id="group_by" class="section level4">
<h4><span class="header-section-number">5.2.7.1</span> group_by</h4>
<p>Un verbo muy poderoso es el group_by. Es por este tipo de verbos que resultó necesario generar un objeto diferente al tradicional dataframe. Básicamente, el tbl_df es capaz de guardar agrupamientos específicos sobre los cuáles puede hacer funciones ventana (<em>window functions</em>) o resúmenes sobre los grupos que se definen.</p>
<div id="ejemplo" class="section level5">
<h5><span class="header-section-number">5.2.7.1.1</span> Ejemplo</h5>
<p>Los datos de vuelos se agrupan naturalmente sobre las aerolíneas.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights.g &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(., carrier)
flights.g</code></pre></div>
<pre><code>## # A tibble: 227,496 x 15
## # Groups:   carrier [15]
##    date                 hour minute   dep   arr dep_delay arr_delay carrier
##    &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
##  1 2011-01-01 12:00:00    14      0  1400  1500         0       -10 AA     
##  2 2011-01-02 12:00:00    14      1  1401  1501         1        -9 AA     
##  3 2011-01-03 12:00:00    13     52  1352  1502        -8        -8 AA     
##  4 2011-01-04 12:00:00    14      3  1403  1513         3         3 AA     
##  5 2011-01-05 12:00:00    14      5  1405  1507         5        -3 AA     
##  6 2011-01-06 12:00:00    13     59  1359  1503        -1        -7 AA     
##  7 2011-01-07 12:00:00    13     59  1359  1509        -1        -1 AA     
##  8 2011-01-08 12:00:00    13     55  1355  1454        -5       -16 AA     
##  9 2011-01-09 12:00:00    14     43  1443  1554        43        44 AA     
## 10 2011-01-10 12:00:00    14     43  1443  1553        43        43 AA     
## # ... with 227,486 more rows, and 7 more variables: flight &lt;int&gt;,
## #   dest &lt;chr&gt;, plane &lt;chr&gt;, cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;,
## #   velocidad &lt;dbl&gt;</code></pre>
<div class="ejercicio">
<p>
<strong>Ejercicios</strong>
</p>
<ol style="list-style-type: decimal">
<li>
Busca en la ayuda la función <code>top_n</code>.
</li>
<li>
Utilízala, junto con <code>group_by</code>, <code>arrange</code> y <code>summarise</code> para extraer los 10 aviones por aerolínea con el menor promedio de velocidad.
</li>
<li>
¿Cuáles son los aeropuertos con mayor promedio de retraso en la salida?
</li>
<li>
¿Cuáles son los aeropuertos con mayor promedio de retraso en las llegadas?
</li>
</ol>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Respuestas</span>
<span class="co"># 1</span>
?top_n
<span class="co"># 2</span>
flights <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">velocidad =</span> dist<span class="op">/</span>time) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">group_by</span>(plane, carrier) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">summarise</span>(<span class="dt">vel_prom =</span> <span class="kw">mean</span>(velocidad, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">arrange</span>(vel_prom) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">top_n</span>(<span class="dv">1</span>) 

<span class="co"># 3</span>
flights <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">summarise</span>(<span class="dt">arr_delay =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">arrange</span>(<span class="kw">desc</span>(arr_delay)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">head</span>(<span class="dv">10</span>)</code></pre></div>
<div class="curiosidad">
<p>
<strong>Afectación de otros verbos por <code>group_by</code></strong>
</p>
<p>
El establecer grupos puede conjugarse con los demás verbos implementados en el paquete <code>dplyr</code> y los afecta de diferente manera <span class="citation"><span class="citation">(Wickham and Francois, n.d., viñeta de introducción)</span></span>:
</p>
<ul>
<li>
<code>select</code> realiza la misma operación pero retiene siempre las variables de agrupación.
</li>
<li>
<code>arrange</code> realiza el arreglo según las variables especificadas pero ordena primero según los grupos.
</li>
<li>
<code>mutate</code> y <code>filter</code> realizan las operación dentro de los grupos definidos y son más útiles cuando se utilizan en conjunción a las funciones ventana.
</li>
<li>
<code>sample_n</code> y <code>sample_frac</code> extraen el número o fracción de observaciones según el número o fracción de filas en cada grupo.
</li>
<li>
<code>summarise</code> en conjunción con <code>group_by</code> llevan acabo el paradigma split (por las variables definidas en el <code>group_by</code>), apply (por las funciones especificadas en el <code>summarise</code>) y lo combinan en un dataframe.
</li>
</ul>
</div>
</div>
</div>
<div id="ungroup" class="section level4">
<h4><span class="header-section-number">5.2.7.2</span> ungroup</h4>
<!-- agregar cuales funciones pueden agruparse -->
<p>La función <code>group_by</code> agrega la clase <code>grouped_df</code>, así como atributos al objeto.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">g.df &lt;-<span class="st"> </span><span class="kw">group_by</span>(flights, plane, carrier)
<span class="kw">class</span>(g.df)</code></pre></div>
<pre><code>## [1] &quot;grouped_df&quot; &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(<span class="kw">attributes</span>(g.df))</code></pre></div>
<pre><code>##  [1] &quot;names&quot;              &quot;row.names&quot;          &quot;spec&quot;              
##  [4] &quot;class&quot;              &quot;vars&quot;               &quot;drop&quot;              
##  [7] &quot;indices&quot;            &quot;group_sizes&quot;        &quot;biggest_group_size&quot;
## [10] &quot;labels&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(flights)</code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(<span class="kw">attributes</span>(flights))</code></pre></div>
<pre><code>## [1] &quot;names&quot;     &quot;row.names&quot; &quot;spec&quot;      &quot;class&quot;</code></pre>
<p>La función <code>ungroup</code> los elimina:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="kw">ungroup</span>(g.df))</code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(<span class="kw">attributes</span>(<span class="kw">ungroup</span>(g.df)))</code></pre></div>
<pre><code>## [1] &quot;class&quot;     &quot;names&quot;     &quot;row.names&quot; &quot;spec&quot;</code></pre>
<div class="ejercicio">
<p>
<strong>Ejercicios</strong>
</p>
<ol style="list-style-type: decimal">
<li>
¿Cuáles son los aeropuertos que SI están en la base de destinos?
</li>
<li>
¿Cuáles son los aeropuertos que NO están en la base de destinos?
</li>
<li>
Realiza un resumen de los vuelos por aeropuerto para varias variables con la función <code>summarise</code>.
</li>
<li>
Utiliza la función <code>inner_join</code> para pegar la tablas de resumen creada en el paso anterior a la tabla <em>airports</em>
</li>
<li>
Realiza un resumen de los vuelos por avión para varias variables con la función <code>summarise</code>.
</li>
<li>
Utiliza la función <code>left_join</code> para pegar la tablas de resumen creada en el paso anterior a la tabla <em>planes</em>
</li>
<li>
Extrae el porcentaje de vuelos cancelados por aerolínea cada año y el porcentaje de vuelos retrasados por aerolínea cada año.
</li>
</ol>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Respuestas</span>

<span class="co"># 1</span>
<span class="kw">semi_join</span>(airports, flights, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;iata&quot;</span> =<span class="st"> &quot;dest&quot;</span>))
<span class="co"># 2</span>
<span class="kw">anti_join</span>(airports, flights, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;iata&quot;</span> =<span class="st"> &quot;dest&quot;</span>))
<span class="co"># 3</span>
res.vuelos &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">flights =</span> <span class="kw">n</span>()
    , <span class="dt">planes =</span> <span class="kw">n_distinct</span>(plane)
    , <span class="dt">carriers =</span> <span class="kw">n_distinct</span>(carrier)
    , <span class="dt">cancelled_flights =</span> <span class="kw">sum</span>(cancelled, <span class="dt">na.rm =</span> T)
    , <span class="dt">dep_delay_mean =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm =</span> T)
  )
<span class="co"># 4</span>
airports_flights &lt;-<span class="st"> </span><span class="kw">inner_join</span>(airports, res.vuelos
                               , <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;iata&quot;</span> =<span class="st"> &quot;dest&quot;</span>))
<span class="co"># 5</span>
res.aviones &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(plane) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">flights =</span> <span class="kw">n</span>()
    , <span class="dt">carriers =</span> <span class="kw">n_distinct</span>(carrier)
    , <span class="dt">cancelled_flights =</span> <span class="kw">sum</span>(cancelled, <span class="dt">na.rm =</span> T)
    , <span class="dt">dep_delay_mean =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm =</span> T)
    , <span class="dt">arr_delay_mean =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm =</span> T)
    , <span class="dt">dist_mean =</span> <span class="kw">mean</span>(dist, <span class="dt">na.rm =</span> T)
    , <span class="dt">vel_mean =</span> <span class="kw">mean</span>(dist<span class="op">/</span>time, <span class="dt">na.rm =</span> T)
  ) 
<span class="co"># 6</span>
planes_flights &lt;-<span class="st"> </span><span class="kw">left_join</span>(planes, res.aviones)
<span class="co"># 7 </span>
flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">anio =</span> lubridate<span class="op">::</span><span class="kw">year</span>(date)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(carrier, anio) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">vuelos.anuales =</span> <span class="kw">n</span>()
    , <span class="dt">cancelados =</span> <span class="kw">sum</span>(cancelled, <span class="dt">na.rm =</span> T)<span class="op">/</span>vuelos.anuales <span class="op">*</span><span class="st"> </span><span class="dv">100</span>
    , <span class="dt">retrasados =</span> <span class="kw">sum</span>(dep_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, <span class="dt">na.rm =</span> T)<span class="op">/</span>vuelos.anuales <span class="op">*</span><span class="st"> </span><span class="dv">100</span>
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>()</code></pre></div>
</div>
</div>
<div id="reorganizar-datos" class="section level3">
<h3><span class="header-section-number">5.2.8</span> Reorganizar datos</h3>
<div id="data_frame" class="section level4">
<h4><span class="header-section-number">5.2.8.1</span> data_frame</h4>
<p>Al igual que la función <code>data.frame</code>, esta función permite generar un data frame a partir de vectores:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data_frame</span>(
  <span class="dt">x =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>)
  , <span class="dt">y =</span> <span class="kw">runif</span>(<span class="dv">100</span>)
)
<span class="kw">class</span>(df)</code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">x =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>)
  , <span class="dt">y =</span> <span class="kw">runif</span>(<span class="dv">100</span>)
)
<span class="kw">class</span>(df)</code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>La clase del objeto generado por la función <code>data_frame</code> es un <code>tibble</code> mientras que la función del base <code>data.frame</code> es de clase <code>data.frame</code>.</p>
</div>
<div id="arrange" class="section level4">
<h4><span class="header-section-number">5.2.8.2</span> arrange</h4>
<p><code>order</code> habíamos visto que es la implementación del base para ordenar vectores o en su defecto, dataframes de acuerdo a valores de vectores en esta. Sin embargo, es engorrosa la manera de llamarlo.</p>
<p>Podemos arreglar los valores de las tablas, fácilmente con <code>arrange</code>. Por ejemplo, podemos ver los 5 vuelos con mayor retraso de llegada.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">arrange</span>(flights, <span class="kw">desc</span>(arr_delay)), <span class="dt">n=</span><span class="dv">5</span>)</code></pre></div>
<pre><code>## # A tibble: 5 x 15
##   date                 hour minute   dep   arr dep_delay arr_delay carrier
##   &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
## 1 2011-12-12 12:00:00     6     50   650   808       970       978 AA     
## 2 2011-08-01 12:00:00     1     56   156   452       981       957 CO     
## 3 2011-11-08 12:00:00     7     21   721   948       931       918 MQ     
## 4 2011-06-21 12:00:00    23     34  2334   124       869       861 UA     
## 5 2011-05-20 12:00:00     8     58   858  1027       803       822 MQ     
## # ... with 7 more variables: flight &lt;int&gt;, dest &lt;chr&gt;, plane &lt;chr&gt;,
## #   cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;, velocidad &lt;dbl&gt;</code></pre>
<p>O los 5 con menor atraso de llegada</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">arrange</span>(flights, arr_delay), <span class="dt">n=</span><span class="dv">5</span>)</code></pre></div>
<pre><code>## # A tibble: 5 x 15
##   date                 hour minute   dep   arr dep_delay arr_delay carrier
##   &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
## 1 2011-07-03 12:00:00    19     14  1914  2039        -1       -70 XE     
## 2 2011-12-25 12:00:00     7     41   741   926        -4       -57 OO     
## 3 2011-08-21 12:00:00     9     35   935  1039       -10       -56 OO     
## 4 2011-08-31 12:00:00     9     34   934  1039       -11       -56 OO     
## 5 2011-08-26 12:00:00    21      7  2107  2205        -3       -55 OO     
## # ... with 7 more variables: flight &lt;int&gt;, dest &lt;chr&gt;, plane &lt;chr&gt;,
## #   cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;, velocidad &lt;dbl&gt;</code></pre>
<p>Podemos arreglar primero por destino y luego por retraso de llegada.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">arrange</span>(flights, dest, arr_delay)</code></pre></div>
<pre><code>## # A tibble: 227,496 x 15
##    date                 hour minute   dep   arr dep_delay arr_delay carrier
##    &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
##  1 2011-11-25 12:00:00    12     55  1255  1344         0       -26 WN     
##  2 2011-01-12 12:00:00     8     56   856  1000       -14       -25 OO     
##  3 2011-12-25 12:00:00    19     50  1950  2045        -5       -25 WN     
##  4 2011-03-16 12:00:00    17     39  1739  1841        -8       -24 OO     
##  5 2011-03-17 12:00:00    11     17  1117  1214        -3       -24 XE     
##  6 2011-12-30 12:00:00    17     27  1727  1828        -3       -24 OO     
##  7 2011-01-29 12:00:00    17     32  1732  1837        -3       -23 CO     
##  8 2011-05-29 12:00:00    18     11  1811  1902        -4       -23 WN     
##  9 2011-02-13 12:00:00    17     34  1734  1843        -1       -22 CO     
## 10 2011-04-17 12:00:00    17     18  1718  1818        -7       -22 WN     
## # ... with 227,486 more rows, and 7 more variables: flight &lt;int&gt;,
## #   dest &lt;chr&gt;, plane &lt;chr&gt;, cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;,
## #   velocidad &lt;dbl&gt;</code></pre>
</div>
<div id="rename" class="section level4">
<h4><span class="header-section-number">5.2.8.3</span> rename</h4>
<p>Es posible renombrar las variables por nombre utilizando la función <code>rename</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dplyr<span class="op">::</span><span class="kw">rename</span>(flights, <span class="dt">iata =</span> dest)</code></pre></div>
<pre><code>## # A tibble: 227,496 x 15
##    date                 hour minute   dep   arr dep_delay arr_delay carrier
##    &lt;dttm&gt;              &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;     &lt;int&gt; &lt;chr&gt;  
##  1 2011-01-01 12:00:00    14      0  1400  1500         0       -10 AA     
##  2 2011-01-02 12:00:00    14      1  1401  1501         1        -9 AA     
##  3 2011-01-03 12:00:00    13     52  1352  1502        -8        -8 AA     
##  4 2011-01-04 12:00:00    14      3  1403  1513         3         3 AA     
##  5 2011-01-05 12:00:00    14      5  1405  1507         5        -3 AA     
##  6 2011-01-06 12:00:00    13     59  1359  1503        -1        -7 AA     
##  7 2011-01-07 12:00:00    13     59  1359  1509        -1        -1 AA     
##  8 2011-01-08 12:00:00    13     55  1355  1454        -5       -16 AA     
##  9 2011-01-09 12:00:00    14     43  1443  1554        43        44 AA     
## 10 2011-01-10 12:00:00    14     43  1443  1553        43        43 AA     
## # ... with 227,486 more rows, and 7 more variables: flight &lt;int&gt;,
## #   iata &lt;chr&gt;, plane &lt;chr&gt;, cancelled &lt;int&gt;, time &lt;int&gt;, dist &lt;int&gt;,
## #   velocidad &lt;dbl&gt;</code></pre>

</div>
</div>
</div>
<h3>Bibliografía</h3>
<div id="refs" class="references">
<div id="ref-grolemund2016r">
<p>Grolemund, G., and H. Wickham. 2016. <em>R for Data Science</em>. O’Reilly Media, Incorporated. <a href="http://r4ds.had.co.nz/" class="uri">http://r4ds.had.co.nz/</a>.</p>
</div>
<div id="ref-tidyr">
<p>Wickham, Hadley. 2016b. <em>Tidyr: Easily Tidy Data with ’Spread()’ and ’Gather()’ Functions</em>. <a href="https://CRAN.R-project.org/package=tidyr" class="uri">https://CRAN.R-project.org/package=tidyr</a>.</p>
</div>
<div id="ref-flights">
<p>Wickham, Hadley. 2016a. <em>Nycflights13: Flights That Departed Nyc in 2013</em>. <a href="https://CRAN.R-project.org/package=nycflights13" class="uri">https://CRAN.R-project.org/package=nycflights13</a>.</p>
</div>
<div id="ref-magrittr">
<p>Bache, Stefan Milton, and Hadley Wickham. 2014. <em>Magrittr: A Forward-Pipe Operator for R</em>. <a href="https://CRAN.R-project.org/package=magrittr" class="uri">https://CRAN.R-project.org/package=magrittr</a>.</p>
</div>
<div id="ref-joins">
<p>Moffat, CL. 2009. “Visual Representation of Sql Joins.” Blog. <a href="https://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins" class="uri">https://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="10">
<li id="fn10"><p>Para iniciar en <code>data.table</code> se recomienda ver <span class="citation">Srinivasan and Dowle (<a href="#ref-datatabletutorial">2016</a>)</span> así como las viñetas del paquete <span class="citation">Dowle et al. (<a href="#ref-datatable">2015</a>)</span>.<a href="5-2-transformacion-de-datos.html#fnref10">↩</a></p></li>
<li id="fn11"><p>Para una explicación más detallada de la importancia de este operador en la simplificación de código, ver la nota del autor del paquete Stefan Milton en <span class="citation">Galili (<a href="#ref-simplermagrittr">2014</a>)</span> y la viñeta <code>magrittr</code> dentro del paquete.<a href="5-2-transformacion-de-datos.html#fnref11">↩</a></p></li>
</ol>
</div>
<p style="text-align: center;">
<a href="5-1-importacion-de-datos.html"><button class="btn btn-default">Previous</button></a>
<a href="5-3-datos-limpios.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
